# 開発スケジュール（2025年11月〜2026年1月）

> **最終更新**: 2025-11-26
> **対象マイルストーン**: v0.4.0 - Tauri移行 & 国際化対応

## 📋 概要

本ドキュメントは、v0.4.0 リリースに向けた2つの主要タスクの並行開発スケジュールを整理したものです。

| タスク | GitHub Issue | 期間 |
|--------|--------------|------|
| **Hybrid DB Strategy** | [#189](https://github.com/otomatty/for-all-learners/issues/189) | 約7週間 |
| **国際化対応 (i18n)** | [#119](https://github.com/otomatty/for-all-learners/issues/119) | 2025-11 ~ 2026-01 |

---

## 🗓️ 週次スケジュール

### Week 1: 2025/11/26 〜 2025/12/02

```
┌─────────────────────────────────────────────────────────────────┐
│  Hybrid DB: Phase A 開始                                        │
│  ├─ #190 IndexedDB クライアント実装                              │
│  └─ #191 SQLite スキーマ設計・Rust実装                           │
│                                                                  │
│  i18n: Phase 1 進行中                                            │
│  ├─ next-intl / @formatjs 導入                                   │
│  ├─ App Router の [locale] セグメント化                          │
│  └─ 翻訳辞書ローダーと型定義                                      │
│                                                                  │
│  状態: 並行開発可能（相互依存なし）                               │
└─────────────────────────────────────────────────────────────────┘
```

**今週のゴール**:
- [ ] IndexedDB クライアント基盤完成
- [ ] SQLite スキーマ定義完了
- [ ] i18n 基盤セットアップ完了

---

### Week 2: 2025/12/03 〜 2025/12/09

```
┌─────────────────────────────────────────────────────────────────┐
│  Hybrid DB: Phase A 継続                                        │
│  └─ #192 Tauri Commands (SQLite操作) 実装                        │
│                                                                  │
│  i18n: Phase 2 開始                                              │
│  └─ Notes セクションの翻訳対応                                    │
│                                                                  │
│  状態: 並行開発可能                                               │
└─────────────────────────────────────────────────────────────────┘
```

**今週のゴール**:
- [ ] Tauri SQLite Commands 実装完了
- [ ] Notes UI の翻訳キー適用開始

---

### Week 3: 2025/12/10 〜 2025/12/16

```
┌─────────────────────────────────────────────────────────────────┐
│  Hybrid DB: Phase B 開始                                        │
│  ├─ #193 同期マネージャー実装                                    │
│  └─ #194 競合解決ロジック実装                                    │
│                                                                  │
│  i18n: Phase 2 継続                                              │
│  └─ Decks / Learn / Goals の翻訳対応                             │
│                                                                  │
│  状態: 並行開発可能                                               │
└─────────────────────────────────────────────────────────────────┘
```

**今週のゴール**:
- [ ] SyncManager 基本動作確認
- [ ] Last Write Wins 競合解決実装
- [ ] 主要機能の翻訳対応 50% 完了

---

### Week 4: 2025/12/17 〜 2025/12/23

```
┌─────────────────────────────────────────────────────────────────┐
│  Hybrid DB: Phase C 開始                                        │
│  ├─ #195 Repository 基盤設計                                     │
│  ├─ #196 Notes/Pages Repository                                  │
│  └─ #197 Decks/Cards Repository                                  │
│                                                                  │
│  i18n: Phase 2 継続                                              │
│  └─ 公開ページ（Landing / Auth）翻訳対応                         │
│                                                                  │
│  ⚠️ 同期ポイント: Repository層のエラーメッセージでi18nキーを考慮  │
└─────────────────────────────────────────────────────────────────┘
```

**今週のゴール**:
- [ ] Repository パターン基盤完成
- [ ] Notes/Pages/Decks/Cards Repository 実装
- [ ] エラーコード方式でi18n対応準備

**注意事項**:
```typescript
// Repository層ではエラーコードを返し、UI層で翻訳
export class RepositoryError extends Error {
  constructor(public code: string, public details?: unknown) {
    super(code);
  }
}
```

---

### Week 5: 2025/12/24 〜 2025/12/30

```
┌─────────────────────────────────────────────────────────────────┐
│  Hybrid DB: Phase D 開始                                        │
│  └─ #198 既存フックの Repository 移行                            │
│                                                                  │
│  i18n: Phase 2 完了 → Phase 3 準備                               │
│  └─ バリデーション・通知メッセージの共通化                        │
│                                                                  │
│  ⚠️ 同期ポイント: フック移行時にi18n適用を前提とした設計          │
└─────────────────────────────────────────────────────────────────┘
```

**今週のゴール**:
- [ ] useNotes, useDecks フック移行完了
- [ ] i18n Phase 2 完了
- [ ] 翻訳キー適用済みのエラー表示

---

### Week 6: 2025/12/31 〜 2026/01/06

```
┌─────────────────────────────────────────────────────────────────┐
│  Hybrid DB: Phase D 継続                                        │
│  └─ #198 残りのフック移行                                        │
│                                                                  │
│  i18n: Phase 3 開始                                              │
│  ├─ プラグイン API へのロケールコンテキスト注入                   │
│  └─ Tauri コマンドでの翻訳利用                                   │
│                                                                  │
│  状態: 並行開発可能                                               │
└─────────────────────────────────────────────────────────────────┘
```

**今週のゴール**:
- [ ] 全フックの Repository 移行完了
- [ ] プラグインi18n対応開始

---

### Week 7: 2026/01/07 〜 2026/01/13

```
┌─────────────────────────────────────────────────────────────────┐
│  Hybrid DB: Phase E 開始                                        │
│  ├─ #199 Yjs + Supabase Realtime 統合                            │
│  └─ #200 Tiptap Collaboration Extension                          │
│                                                                  │
│  i18n: Phase 3 継続                                              │
│  └─ 通知・ダイアログの多言語化                                   │
│                                                                  │
│  ⚠️ 同期ポイント: リアルタイム編集UIでi18n適用                    │
└─────────────────────────────────────────────────────────────────┘
```

**今週のゴール**:
- [ ] Yjs + Supabase Realtime 接続確立
- [ ] Tiptap Collaboration 基本動作確認
- [ ] 接続ステータス表示のi18n対応

---

### Week 8: 2026/01/14 〜 2026/01/20

```
┌─────────────────────────────────────────────────────────────────┐
│  Hybrid DB: Phase E 継続                                        │
│  └─ #201 プレゼンス・カーソル共有                                │
│                                                                  │
│  i18n: Phase 3 完了                                              │
│  └─ sandbox worker 用翻訳ブリッジ完成                            │
│                                                                  │
│  ⚠️ 同期ポイント: 「〇〇さんが編集中」等の表示でi18n適用          │
└─────────────────────────────────────────────────────────────────┘
```

**今週のゴール**:
- [ ] プレゼンス機能完成
- [ ] カーソル共有実装
- [ ] 「{name}さんが編集中」の翻訳対応

---

### Week 9: 2026/01/21 〜 2026/01/31

```
┌─────────────────────────────────────────────────────────────────┐
│  Hybrid DB: 統合テスト・最終調整                                 │
│  ├─ オフライン→オンライン同期テスト                              │
│  ├─ 競合解決シナリオテスト                                       │
│  └─ パフォーマンス最適化                                         │
│                                                                  │
│  i18n: Phase 4                                                   │
│  ├─ 自動テスト整備（Vitest + Playwright）                        │
│  ├─ 翻訳ファイル CI パイプライン構築                              │
│  └─ 初期ロケール（日本語・英語）翻訳完了                         │
│                                                                  │
│  状態: 統合テスト・リリース準備                                   │
└─────────────────────────────────────────────────────────────────┘
```

**今週のゴール**:
- [ ] v0.4.0 リリース候補完成
- [ ] 全機能の統合テスト完了
- [ ] 日本語・英語翻訳完了

---

## 📊 依存関係マトリクス

### Hybrid DB → i18n への依存

| Hybrid DB Phase | i18n 依存 | 理由 |
|-----------------|-----------|------|
| Phase A (#190, #191, #192) | なし | データ層のみ |
| Phase B (#193, #194) | 低 | エラーメッセージは後から対応可能 |
| Phase C (#195, #196, #197) | 中 | エラーコード設計時にi18n考慮推奨 |
| Phase D (#198) | 高 | UI更新時にi18n適用が効率的 |
| Phase E (#199, #200, #201) | 高 | ステータス表示等でi18n必須 |

### i18n → Hybrid DB への依存

| i18n Phase | Hybrid DB 依存 | 理由 |
|------------|----------------|------|
| Phase 1 | なし | 基盤構築のみ |
| Phase 2 | なし | 既存UIの翻訳 |
| Phase 3 | 中 | Tauri Commands のエラーメッセージ翻訳 |
| Phase 4 | 低 | テスト時に統合確認 |

---

## ⚡ クイックリファレンス

### 今すぐ着手可能（i18n待ち不要）

```
#190 IndexedDB Client        → データ層、翻訳不要
#191 SQLite Schema (Rust)    → データ層、翻訳不要
#192 Tauri Commands          → 後からエラーメッセージ翻訳可能
#193 Sync Manager            → 後からエラーメッセージ翻訳可能
#194 Conflict Resolution     → ロジック層、翻訳不要
```

### i18n Phase 1 完了後に着手推奨

```
#195 Repository Base         → エラーコード設計でi18n考慮
#196 Notes/Pages Repository  → 同上
#197 Decks/Cards Repository  → 同上
```

### i18n Phase 2 以降と並行

```
#198 Hook Migration          → UI更新時にi18n適用
#199 Yjs + Realtime          → 接続ステータスのi18n
#200 Tiptap Collaboration    → オフラインインジケーターのi18n
#201 Presence & Cursor       → 「編集中」表示のi18n
```

---

## 🔗 関連ドキュメント

- [Hybrid DB Epic Issue #189](https://github.com/otomatty/for-all-learners/issues/189)
- [国際化対応 Issue #119](https://github.com/otomatty/for-all-learners/issues/119)
- [Tauri移行計画](docs/03_plans/tauri-migration/20251109_01_implementation-plan.md)
- [国際化実装計画](docs/03_plans/internationalization/20251109_01_internationalization-plan.md)
- [Supabase-Tauri統合リサーチ](docs/02_research/2025_11/20251109_02_supabase-tauri-integration.md)

---

## 📝 更新履歴

| 日付 | 更新内容 |
|------|----------|
| 2025-11-26 | 初版作成 |

