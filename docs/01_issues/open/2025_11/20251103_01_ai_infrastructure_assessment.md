# AIæ©Ÿèƒ½åŸºç›¤ã®è©•ä¾¡ã¨ä»Šå¾Œã®ã‚¿ã‚¹ã‚¯

## ğŸ“… åŸºæœ¬æƒ…å ±

- **ä½œæˆæ—¥**: 2025å¹´11æœˆ3æ—¥
- **ä½œæˆè€…**: AI Assistant
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Open
- **é‡è¦åº¦**: High
- **ã‚«ãƒ†ã‚´ãƒª**: Infrastructure / Assessment

---

## ğŸ” è©•ä¾¡ã‚µãƒãƒªãƒ¼

### ç¾åœ¨ã®å®Ÿè£…çŠ¶æ³

#### âœ… å®Œäº†æ¸ˆã¿ï¼ˆPhase 1-5ï¼‰

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | ãƒ†ã‚¹ãƒˆ | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ |
|--------------|-----------|-------|-------------|
| `lib/llm/factory.ts` | âœ… | 18ä»¶é€šé | âœ… å®Œå‚™ |
| `lib/llm/prompt-builder.ts` | âœ… | 29ä»¶é€šé | âœ… å®Œå‚™ |
| `app/_actions/getUserAPIKey.ts` | âœ… | å…¨é€šé | âœ… å®Œå‚™ |
| `app/_actions/generatePageInfo.ts` | âœ… | 12ä»¶é€šé | âœ… æ›´æ–°æ¸ˆã¿ |
| `app/_actions/generateCards.ts` | âœ… | 13ä»¶é€šé | âœ… æ›´æ–°æ¸ˆã¿ |
| `app/_actions/generateCardsFromPage.ts` | âœ… | 19ä»¶é€šé | âœ… æ›´æ–°æ¸ˆã¿ |
| `lib/gemini.ts` (generateQuestions) | âœ… | é€šé | âœ… æ›´æ–°æ¸ˆã¿ |

**ç·ãƒ†ã‚¹ãƒˆæ•°**: 95ä»¶ï¼ˆå…¨ã¦é€šéï¼‰

#### âŒ æœªå¯¾å¿œï¼ˆGeminiå›ºå®šã®ã¾ã¾ï¼‰

| ãƒ•ã‚¡ã‚¤ãƒ« | é–¢æ•°æ•° | å½±éŸ¿ç¯„å›² | å„ªå…ˆåº¦ |
|---------|-------|---------|-------|
| `app/_actions/pdfProcessing.ts` | 2 | PDFå‡¦ç† | ğŸŸ¡ ä¸­ |
| `app/_actions/transcribeImage.ts` | 1 | ç”»åƒOCR | ğŸŸ¡ ä¸­ |
| `app/_actions/transcribeImageBatch.ts` | 2 | ç”»åƒãƒãƒƒãƒå‡¦ç† | ğŸŸ¡ ä¸­ |
| `app/_actions/version.ts` | 1 | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç† | ğŸŸ¢ ä½ |

**ç·æœªå¯¾å¿œé–¢æ•°æ•°**: 6é–¢æ•°

---

## ğŸ¯ 3ã¤ã®é‡è¦ãªåˆ¤æ–­

### 1. AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ©Ÿèƒ½ï¼ˆãƒãƒ£ãƒƒãƒˆãƒãƒ¼ï¼‰ã®å®Ÿè£…ã«ç§»ã‚Œã‚‹ã‹ï¼Ÿ

**å›ç­”**: âœ… **YESï¼ˆæ¡ä»¶ä»˜ãï¼‰**

**ç†ç”±**:
- ä¸»è¦AIç”Ÿæˆé–¢æ•°ã¯å‹•çš„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå¯¾å¿œæ¸ˆã¿
- ãƒ¦ãƒ¼ã‚¶ãƒ¼APIã‚­ãƒ¼ç®¡ç†æ©Ÿèƒ½ã¯å®Œæˆ
- ãƒãƒ£ãƒƒãƒˆãƒãƒ¼ã¯ä¸»ã«generatePageInfoã€generateCardsç­‰ã‚’ä½¿ç”¨
- PDF/ç”»åƒå‡¦ç†ã¯ä¸¦è¡Œå¯¾å¿œå¯èƒ½

**å‰ææ¡ä»¶**:
1. å‹ãƒã‚§ãƒƒã‚¯ãƒ»Lintå®Ÿè¡Œ
2. ç’°å¢ƒå¤‰æ•°ã®ç¢ºèªï¼ˆGEMINI_API_KEYç­‰ï¼‰
3. ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰å®Ÿæ©Ÿå‹•ä½œç¢ºèª

### 2. æ—¢å­˜ã®GitHub Issueã‚’æ›´æ–°ã§ãã‚‹ã‹ï¼Ÿ

**å›ç­”**: âœ… **YES**

**å¯¾è±¡Issue**: #74 - MastraåŸºç›¤æ§‹ç¯‰ã¨APIã‚­ãƒ¼ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿè£…

**æ›´æ–°å†…å®¹**:
- Phase 1.0ï¼ˆæ—¢å­˜AIæ©Ÿèƒ½çµ±åˆï¼‰ã‚’ã€Œå®Œäº†ã€ã«ãƒãƒ¼ã‚¯
- æœªå®Œäº†é …ç›®ï¼ˆPDF/ç”»åƒå‡¦ç†ï¼‰ã‚’æ˜è¨˜
- æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆAIã‚³ãƒãƒ³ãƒ‰ãƒãƒ¼å®Ÿè£…ï¼‰ã¸ã®ç§»è¡Œã‚’è¨˜è¼‰

### 3. é•·æœŸçš„ã«å¯¾å¿œã™ã‚‹ã¹ãã‚¿ã‚¹ã‚¯ã¨Github Issueç™»éŒ²

**å›ç­”**: ä»¥ä¸‹ã®8ã‚¿ã‚¹ã‚¯ã‚’Github Issueã¨ã—ã¦ç™»éŒ²ã™ã¹ã

---

## ğŸ“‹ æ¨å¥¨ã‚¿ã‚¹ã‚¯ä¸€è¦§

### ğŸ”´ é«˜å„ªå…ˆåº¦ï¼ˆå³åº§ã«å¯¾å¿œï¼‰

#### Task 1: å‹ãƒã‚§ãƒƒã‚¯ãƒ»Lintå®Ÿè¡Œ

**Issue ã‚¿ã‚¤ãƒˆãƒ«**: `å‹ãƒã‚§ãƒƒã‚¯ãƒ»Lintå®Ÿè¡Œã¨ã‚¨ãƒ©ãƒ¼ä¿®æ­£`

**å†…å®¹**:
```bash
bun run typecheck
bun run lint
```

å‹•çš„LLMã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå®Ÿè£…å¾Œã€å‹ã‚¨ãƒ©ãƒ¼ã‚„Lintã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ãªã„ã‹ç¢ºèªã€‚

**è¦‹ç©**: 0.5æ™‚é–“  
**å„ªå…ˆåº¦**: ğŸ”´ Critical

---

#### Task 2: PDFå‡¦ç†é–¢æ•°ã®å‹•çš„LLMã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåŒ–

**Issue ã‚¿ã‚¤ãƒˆãƒ«**: `PDFå‡¦ç†é–¢æ•°ã®å‹•çš„LLMã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçµ±åˆ`

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**: `app/_actions/pdfProcessing.ts`

**å¯¾è±¡é–¢æ•°**:
1. `generatePdfQAPairs()` - å•é¡Œãƒ»è§£ç­”åˆ†é›¢
2. `generateAnswerAndExplanation()` - è§£ç­”ãƒ»è§£èª¬ç”Ÿæˆ

**å¤‰æ›´å†…å®¹**:
```typescript
// Before
import { geminiClient } from "@/lib/gemini/client";
const response = await geminiClient.models.generateContent({ ... });

// After
import { createClientWithUserKey } from "@/lib/llm/factory";
import { buildPrompt } from "@/lib/llm/prompt-builder";

const client = await createClientWithUserKey({ provider, model });
const response = await client.generate(prompt);
```

**è¦‹ç©**: 3æ™‚é–“ï¼ˆå®Ÿè£…2h + ãƒ†ã‚¹ãƒˆ1hï¼‰  
**å„ªå…ˆåº¦**: ğŸŸ¡ Medium  
**ä¾å­˜é–¢ä¿‚**: ãªã—

---

#### Task 3: ç”»åƒæ–‡å­—èµ·ã“ã—é–¢æ•°ã®å‹•çš„LLMã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåŒ–

**Issue ã‚¿ã‚¤ãƒˆãƒ«**: `ç”»åƒæ–‡å­—èµ·ã“ã—é–¢æ•°ã®å‹•çš„LLMã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçµ±åˆ`

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**:
1. `app/_actions/transcribeImage.ts` (1é–¢æ•°)
2. `app/_actions/transcribeImageBatch.ts` (2é–¢æ•°)

**è¦‹ç©**: 3æ™‚é–“ï¼ˆå®Ÿè£…2h + ãƒ†ã‚¹ãƒˆ1hï¼‰  
**å„ªå…ˆåº¦**: ğŸŸ¡ Medium  
**ä¾å­˜é–¢ä¿‚**: ãªã—

---

#### Task 4: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†é–¢æ•°ã®å‹•çš„LLMã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåŒ–

**Issue ã‚¿ã‚¤ãƒˆãƒ«**: `ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†é–¢æ•°ã®å‹•çš„LLMã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆçµ±åˆ`

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**: `app/_actions/version.ts`

**å¯¾è±¡é–¢æ•°**: `processVersionCommitStaging()`

**è¦‹ç©**: 1æ™‚é–“  
**å„ªå…ˆåº¦**: ğŸŸ¢ Low  
**ä¾å­˜é–¢ä¿‚**: ãªã—

---

### ğŸŸ¢ ä¸­é•·æœŸã‚¿ã‚¹ã‚¯ï¼ˆAIã‚³ãƒãƒ³ãƒ‰ãƒãƒ¼å®Ÿè£…ï¼‰

#### Task 5: AIã‚³ãƒãƒ³ãƒ‰ãƒãƒ¼ Phase 1 å®Ÿè£…

**Issue ã‚¿ã‚¤ãƒˆãƒ«**: `AIã‚³ãƒãƒ³ãƒ‰ãƒãƒ¼ Phase 1: åŸºæœ¬UI + ãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½`

**ã‚¹ã‚³ãƒ¼ãƒ—**:
- ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã®é…ç½®
- é–‹é–‰ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- åŸºæœ¬çš„ãªãƒãƒ£ãƒƒãƒˆUIï¼ˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã€å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ï¼‰
- LLM APIã¨ã®åŸºæœ¬çš„ãªä¼šè©±æ©Ÿèƒ½

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
```
components/ai-command-bar/
â”œâ”€â”€ index.tsx
â”œâ”€â”€ AICommandBar.tsx
â”œâ”€â”€ _components/
â”‚   â”œâ”€â”€ ChatInterface.tsx
â”‚   â”œâ”€â”€ ChatMessage.tsx
â”‚   â””â”€â”€ ChatInput.tsx
â”œâ”€â”€ _hooks/
â”‚   â””â”€â”€ useAIChat.ts
â””â”€â”€ _actions/
    â””â”€â”€ chatWithAI.ts
```

**è¦‹ç©**: 3-5æ—¥  
**å„ªå…ˆåº¦**: ğŸŸ¡ Medium  
**ä¾å­˜é–¢ä¿‚**: Task 1ï¼ˆå‹ãƒã‚§ãƒƒã‚¯å®Œäº†ï¼‰

---

#### Task 6: AIã‚³ãƒãƒ³ãƒ‰ãƒãƒ¼ Phase 2 å®Ÿè£…

**Issue ã‚¿ã‚¤ãƒˆãƒ«**: `AIã‚³ãƒãƒ³ãƒ‰ãƒãƒ¼ Phase 2: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå¿œç­”`

**ã‚¹ã‚³ãƒ¼ãƒ—**:
- ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®å–å¾—
- ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«å¿œã˜ãŸãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ
- ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å‹•çš„ç”Ÿæˆ

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
```
components/ai-command-bar/
â”œâ”€â”€ _components/
â”‚   â””â”€â”€ ContextDisplay.tsx
â”œâ”€â”€ _hooks/
â”‚   â””â”€â”€ useContextProvider.ts
â””â”€â”€ _actions/
    â””â”€â”€ getContextData.ts
```

**è¦‹ç©**: 2-3æ—¥  
**å„ªå…ˆåº¦**: ğŸŸ¡ Medium  
**ä¾å­˜é–¢ä¿‚**: Task 5ï¼ˆPhase 1å®Œäº†ï¼‰

---

#### Task 7: ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢ç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹ç¯‰

**Issue ã‚¿ã‚¤ãƒˆãƒ«**: `Supabase Vector Extensionã«ã‚ˆã‚‹ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢åŸºç›¤æ§‹ç¯‰`

**ã‚¹ã‚³ãƒ¼ãƒ—**:
- Supabase Vector Extensionæœ‰åŠ¹åŒ–
- `pages` ãƒ†ãƒ¼ãƒ–ãƒ«ã« `content_embedding` ã‚«ãƒ©ãƒ è¿½åŠ 
- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ
- ãƒšãƒ¼ã‚¸å†…å®¹ã®ãƒ™ã‚¯ãƒˆãƒ«åŒ–ãƒãƒƒãƒå‡¦ç†

**ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³SQL**:
```sql
-- Vector Extensionæœ‰åŠ¹åŒ–
CREATE EXTENSION IF NOT EXISTS vector;

-- Embedding ã‚«ãƒ©ãƒ è¿½åŠ 
ALTER TABLE pages 
ADD COLUMN content_embedding vector(768);

-- ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ä½œæˆ
CREATE INDEX ON pages USING ivfflat (content_embedding vector_cosine_ops);
```

**è¦‹ç©**: 2-3æ—¥ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ1æ—¥ + ãƒãƒƒãƒå‡¦ç†å®Ÿè£…1-2æ—¥ï¼‰  
**å„ªå…ˆåº¦**: ğŸŸ¡ Medium  
**ä¾å­˜é–¢ä¿‚**: Task 5ï¼ˆãƒãƒ£ãƒƒãƒˆãƒãƒ¼ Phase 1å®Œäº†ï¼‰

---

#### Task 8: Github Issueç®¡ç†

**Issue ã‚¿ã‚¤ãƒˆãƒ«**: `Github Issue #74 ã®æ›´æ–°ã¨æ–°è¦Issueä½œæˆ`

**å†…å®¹**:
1. **Issue #74 æ›´æ–°**
   - Phase 1.0ï¼ˆæ—¢å­˜AIçµ±åˆï¼‰ã‚’ã€Œâœ… å®Œäº†ã€ã«ãƒãƒ¼ã‚¯
   - æœªå®Œäº†é …ç›®ï¼ˆPDF/ç”»åƒå‡¦ç†ï¼‰ã‚’æ˜è¨˜
   - æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚ºã¸ã®ç§»è¡Œã‚’è¨˜è¼‰

2. **æ–°è¦Issueä½œæˆ**
   - Task 2: PDFå‡¦ç†çµ±åˆ
   - Task 3: ç”»åƒæ–‡å­—èµ·ã“ã—çµ±åˆ
   - Task 4: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†çµ±åˆ
   - Task 5-7: AIã‚³ãƒãƒ³ãƒ‰ãƒãƒ¼å®Ÿè£…ï¼ˆPhase 1-3ï¼‰

**è¦‹ç©**: 1æ™‚é–“  
**å„ªå…ˆåº¦**: ğŸŸ¡ Medium  
**ä¾å­˜é–¢ä¿‚**: ãªã—

---

## ğŸ¯ æ¨å¥¨å®Ÿè£…é †åº

### ã‚¹ãƒ†ãƒƒãƒ—1: å“è³ªä¿è¨¼ï¼ˆå³åº§ã«å®Ÿæ–½ï¼‰
```
Task 1: å‹ãƒã‚§ãƒƒã‚¯ãƒ»Lintå®Ÿè¡Œ (0.5h)
  â†“
ã‚¨ãƒ©ãƒ¼ä¿®æ­£ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
```

### ã‚¹ãƒ†ãƒƒãƒ—2: æ®‹ã‚Šã®AIé–¢æ•°çµ±åˆï¼ˆä¸¦è¡Œå¯èƒ½ï¼‰
```
Task 2: PDFå‡¦ç†çµ±åˆ (3h)
Task 3: ç”»åƒæ–‡å­—èµ·ã“ã—çµ±åˆ (3h)
Task 4: ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†çµ±åˆ (1h)
```

### ã‚¹ãƒ†ãƒƒãƒ—3: AIã‚³ãƒãƒ³ãƒ‰ãƒãƒ¼å®Ÿè£…
```
Task 5: Phase 1 å®Ÿè£… (3-5æ—¥)
  â†“
Task 6: Phase 2 å®Ÿè£… (2-3æ—¥)
  â†“
Task 7: ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯æ¤œç´¢åŸºç›¤ (2-3æ—¥)
```

### ã‚¹ãƒ†ãƒƒãƒ—4: Issueç®¡ç†
```
Task 8: Github Issueæ›´æ–°ãƒ»ä½œæˆ (1h)
```

---

## ğŸ“Š å·¥æ•°è¦‹ç©

| ã‚«ãƒ†ã‚´ãƒª | ã‚¿ã‚¹ã‚¯æ•° | è¦‹ç©æ™‚é–“ | å„ªå…ˆåº¦ |
|---------|--------|---------|-------|
| å“è³ªä¿è¨¼ | 1 | 0.5æ™‚é–“ | ğŸ”´ é«˜ |
| AIé–¢æ•°çµ±åˆ | 3 | 7æ™‚é–“ | ğŸŸ¡ ä¸­ |
| ãƒãƒ£ãƒƒãƒˆãƒãƒ¼ Phase 1-2 | 2 | 5-8æ—¥ | ğŸŸ¡ ä¸­ |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹ç¯‰ | 1 | 2-3æ—¥ | ğŸŸ¡ ä¸­ |
| Issueç®¡ç† | 1 | 1æ™‚é–“ | ğŸŸ¡ ä¸­ |

**åˆè¨ˆè¦‹ç©**: ç´„12-15æ—¥ï¼ˆä¸¦è¡Œä½œæ¥­ã‚’è€ƒæ…®ï¼‰

---

## ğŸš¨ ãƒªã‚¹ã‚¯ã¨æ³¨æ„äº‹é …

### 1. å‹ã‚¨ãƒ©ãƒ¼ã®ç™ºç”Ÿï¼ˆâŒ ç¢ºèªæ¸ˆã¿ï¼‰

**çŠ¶æ³**: TypeScriptã®å‹ãƒã‚§ãƒƒã‚¯ã§ **60ä»¶ã®ã‚¨ãƒ©ãƒ¼ã‚’æ¤œå‡º**

**åŸå› **: 
- Phase 2ã§ `geminiClient` ã‚’éæ¨å¥¨åŒ–ã—ãŸéš›ã€ç’°å¢ƒå¤‰æ•°æœªè¨­å®šæ™‚ã« `null` ã‚’è¿”ã™ã‚ˆã†ã«å¤‰æ›´
- ã¾ã  `geminiClient` ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹10ãƒ•ã‚¡ã‚¤ãƒ«ã§ `null` ãƒã‚§ãƒƒã‚¯ãŒä¸è¶³

**å½±éŸ¿ãƒ•ã‚¡ã‚¤ãƒ«**:
```typescript
// lib/gemini/client.ts:146
export const geminiClient = apiKey ? new GoogleGenAI({ apiKey }) : null;

// å½±éŸ¿ã‚’å—ã‘ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ10ãƒ•ã‚¡ã‚¤ãƒ«ã€21ç®‡æ‰€ï¼‰:
- audioBatchProcessing.ts (2ç®‡æ‰€)
- generateTitle.ts (1ç®‡æ‰€)
- pdfBatchOcr.ts (7ç®‡æ‰€)
- pdfContentAnalysis.ts (1ç®‡æ‰€)
- pdfProcessing.ts (2ç®‡æ‰€)
- transcribe.ts (2ç®‡æ‰€)
- transcribeImage.ts (2ç®‡æ‰€)
- transcribeImageBatch.ts (3ç®‡æ‰€)
- version.ts (1ç®‡æ‰€)
```

**å¯¾å¿œç­–**:

#### å¯¾å¿œç­–A: ä¸€æ™‚çš„ãªå¯¾å¿œï¼ˆnullãƒã‚§ãƒƒã‚¯è¿½åŠ ï¼‰
```typescript
// Before
const response = await geminiClient.models.generateContent({ ... });

// After
if (!geminiClient) {
  throw new Error("Gemini API key is not configured");
}
const response = await geminiClient.models.generateContent({ ... });
```

- **è¦‹ç©**: 2æ™‚é–“
- **ãƒ¡ãƒªãƒƒãƒˆ**: å³åº§ã«å‹ã‚¨ãƒ©ãƒ¼è§£æ¶ˆ
- **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**: æ ¹æœ¬è§£æ±ºã«ãªã‚‰ãªã„

#### å¯¾å¿œç­–B: æ ¹æœ¬çš„ãªå¯¾å¿œï¼ˆå‹•çš„ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåŒ–ï¼‰â† **æ¨å¥¨**
```typescript
// Before
import { geminiClient } from "@/lib/gemini/client";
const response = await geminiClient.models.generateContent({ ... });

// After
import { createClientWithUserKey } from "@/lib/llm/factory";
import { buildPrompt } from "@/lib/llm/prompt-builder";

const client = await createClientWithUserKey({ provider, model });
const response = await client.generate(prompt);
```

- **è¦‹ç©**: 8-10æ™‚é–“ï¼ˆ10ãƒ•ã‚¡ã‚¤ãƒ«å…¨ã¦ï¼‰
- **ãƒ¡ãƒªãƒƒãƒˆ**: ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼éä¾å­˜ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼APIã‚­ãƒ¼å¯¾å¿œ
- **ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ**: æ™‚é–“ãŒã‹ã‹ã‚‹

**æ¨å¥¨ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**: 
1. ã¾ãšå¯¾å¿œç­–Aã§å‹ã‚¨ãƒ©ãƒ¼ã‚’è§£æ¶ˆï¼ˆãƒ“ãƒ«ãƒ‰ã‚’é€šã™ï¼‰
2. é †æ¬¡ã€å¯¾å¿œç­–Bã§æ ¹æœ¬çš„ã«ç§»è¡Œ

### 2. ç’°å¢ƒå¤‰æ•°ã®ä¾å­˜

**æ‡¸å¿µ**: `GEMINI_API_KEY` ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ç’°å¢ƒã§å‹•ä½œã—ãªã„

**å¯¾å¿œ**: ãƒ¦ãƒ¼ã‚¶ãƒ¼APIã‚­ãƒ¼è¨­å®šUIã§ã®è¨­å®šã‚’ä¿ƒé€²

### 3. Supabase Vector Extensionã®åˆ¶é™

**æ‡¸å¿µ**: Supabaseãƒ—ãƒ©ãƒ³ã«ã‚ˆã£ã¦åˆ©ç”¨åˆ¶é™ãŒã‚ã‚‹

**å¯¾å¿œ**: äº‹å‰ã«Supabaseãƒ—ãƒ©ãƒ³ã‚’ç¢ºèª

---

## ğŸ‰ ã¾ã¨ã‚

### ç¾çŠ¶è©•ä¾¡: **âœ… è‰¯å¥½**

- AIæ©Ÿèƒ½ã®åŸºç›¤ã¯ **ã»ã¼å®Œæˆ**
- ãƒ†ã‚¹ãƒˆã¯å…¨ã¦é€šé
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚æ•´å‚™æ¸ˆã¿
- **AIã‚³ãƒãƒ³ãƒ‰ãƒãƒ¼å®Ÿè£…ã«ç§»ã‚‹æº–å‚™ã¯æ•´ã£ã¦ã„ã‚‹**

### æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³:

1. âœ… **å³åº§**: å‹ãƒã‚§ãƒƒã‚¯ãƒ»Lintå®Ÿè¡Œï¼ˆTask 1ï¼‰
2. ğŸŸ¡ **çŸ­æœŸ**: PDF/ç”»åƒå‡¦ç†ã®çµ±åˆï¼ˆTask 2-4ï¼‰
3. ğŸŸ¢ **ä¸­æœŸ**: AIã‚³ãƒãƒ³ãƒ‰ãƒãƒ¼å®Ÿè£…ï¼ˆTask 5-7ï¼‰
4. ğŸ“ **ç®¡ç†**: Github Issueæ›´æ–°ãƒ»ä½œæˆï¼ˆTask 8ï¼‰

---

**ä½œæˆæ—¥**: 2025-11-03  
**æœ€çµ‚æ›´æ–°**: 2025-11-03  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Open  
**æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼**: Task 1å®Œäº†å¾Œ

