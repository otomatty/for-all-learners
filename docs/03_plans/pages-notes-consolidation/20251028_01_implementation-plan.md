# `/pages` ã‹ã‚‰ `/notes` ã¸ã®çµ±åˆå®Ÿè£…è¨ˆç”»

**ä½œæˆæ—¥**: 2025-10-28
**æœ€çµ‚æ›´æ–°**: 2025-10-28
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: Phase 1-2 å®Ÿè£…ä¸­

---

## ğŸ“‹ æ¦‚è¦

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€`/pages` ãƒ«ãƒ¼ãƒˆã‚’ `/notes` ãƒ«ãƒ¼ãƒˆã«çµ±åˆã™ã‚‹æ®µéšçš„ãªå®Ÿè£…è¨ˆç”»ã‚’å®šç¾©ã—ã¾ã™ã€‚

**å‚ç…§**: [çµ±åˆå¯èƒ½æ€§åˆ†æãƒ¬ãƒãƒ¼ãƒˆ](../../02_research/2025_10/20251028_01_pages-notes-consolidation-analysis.md)

---

## ğŸ¯ å®Ÿè£…ã®ç›®æ¨™

1. **ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡å‰Šé™¤**: `pages-list.tsx` ãªã©ã®é‡è¤‡ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ±åˆ
2. **ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ã®çµ±ä¸€**: `/pages` ã¨ `/notes` ã®ä½¿ã„åˆ†ã‘ã‚’è§£æ¶ˆ
3. **éšå±¤æ§‹é€ ã®æ˜ç¢ºåŒ–**: ãƒãƒ¼ãƒˆ â†’ ãƒšãƒ¼ã‚¸ã®éšå±¤ã‚’ä¸€è²«ã•ã›ã‚‹
4. **ä¸‹ä½äº’æ›æ€§ã®ç¶­æŒ**: æ—¢å­˜ã®ãƒªãƒ³ã‚¯ãƒ»ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«å¯¾å¿œ

---

## ğŸ“… å®Ÿè£…ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

| ãƒ•ã‚§ãƒ¼ã‚º | æœŸé–“ | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | æ‹…å½“ |
|---------|------|-----------|------|
| Phase 1 | 2025-10-28 - 2025-11-04 | âœ… å®Œäº† | AI + Dev |
| Phase 2 | 2025-10-28 - 2025-11-04 | âœ… å®Œäº† | AI + Dev |
| Phase 3 | 2025-11-05 - 2025-11-18 | â³ æœªç€æ‰‹ | Dev |
| Phase 4 | 2025-11-19 - 2025-12-02 | â³ æœªç€æ‰‹ | Dev |
| Phase 5 | 2025-12-03 - 2025-12-09 | â³ æœªç€æ‰‹ | Dev |

---

## Phase 1: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆå°å…¥ âœ… å®Œäº†

### ç›®æ¨™
ã™ã¹ã¦ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã€Œã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸ã€ãƒãƒ¼ãƒˆï¼ˆslug: `all-pages`ï¼‰ã‚’ä½œæˆã—ã€æ—¢å­˜ãƒšãƒ¼ã‚¸ã‚’è‡ªå‹•çš„ã«ç´ä»˜ã‘ã‚‹ã€‚

### å®Ÿè£…å†…å®¹

#### 1.1 ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ âœ…
**ãƒ•ã‚¡ã‚¤ãƒ«**: `database/migrations/20251028_create_default_notes.sql`

```sql
-- å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆã‚’ä½œæˆ
INSERT INTO public.notes (owner_id, slug, title, description, visibility)
SELECT a.id, 'all-pages', 'ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸', ..., 'private'
FROM public.accounts a
WHERE NOT EXISTS (SELECT 1 FROM public.notes n WHERE n.owner_id = a.id AND n.slug = 'all-pages')
ON CONFLICT (slug) DO NOTHING;

-- æ—¢å­˜ãƒšãƒ¼ã‚¸ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆã«ãƒªãƒ³ã‚¯
INSERT INTO public.note_page_links (note_id, page_id)
SELECT n.id, p.id
FROM public.pages p
INNER JOIN public.notes n ON n.owner_id = p.user_id AND n.slug = 'all-pages'
WHERE NOT EXISTS (SELECT 1 FROM public.note_page_links npl WHERE npl.page_id = p.id AND npl.note_id = n.id)
ON CONFLICT (note_id, page_id) DO NOTHING;

-- æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ç”¨ãƒˆãƒªã‚¬ãƒ¼ä½œæˆ
CREATE TRIGGER trg_create_default_note
  AFTER INSERT ON public.accounts
  FOR EACH ROW
  EXECUTE FUNCTION public.create_default_note_for_user();
```

#### 1.2 ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ä½œæˆ âœ…
**ãƒ•ã‚¡ã‚¤ãƒ«**: `app/_actions/notes/getDefaultNote.ts`

```typescript
// getDefaultNote() - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆã‚’å–å¾—ï¼ˆãªã‘ã‚Œã°ä½œæˆï¼‰
// ensureDefaultNote(userId) - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆã®å­˜åœ¨ã‚’ä¿è¨¼
// linkPageToDefaultNote(userId, pageId) - ãƒšãƒ¼ã‚¸ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆã«ãƒªãƒ³ã‚¯
```

**å¤‰æ›´ç‚¹**:
- æ—¢å­˜ã® `getDefaultNote.ts` ã‚’æ›´æ–°
- slug ã‚’ `default-${userId}` ã‹ã‚‰ `all-pages` ã«çµ±ä¸€
- `createDefaultNote.ts` ã‚‚åŒæ§˜ã«æ›´æ–°

#### 1.3 ãƒšãƒ¼ã‚¸ä½œæˆæ™‚ã®è‡ªå‹•ãƒªãƒ³ã‚¯ âœ…
**ãƒ•ã‚¡ã‚¤ãƒ«**: `app/_actions/pages.ts`

```typescript
export async function createPage(...) {
  // ... æ—¢å­˜ã®å‡¦ç† ...

  // 3. Auto-link to default note
  const { linkPageToDefaultNote } = await import("./notes/getDefaultNote");
  try {
    await linkPageToDefaultNote(data.user_id, data.id);
  } catch {
    // Fail silently
  }

  return data;
}
```

### ãƒ†ã‚¹ãƒˆé …ç›®
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§æ­£å¸¸å‹•ä½œ
- [ ] æ–°è¦ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½œæˆæ™‚ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆãŒè‡ªå‹•ä½œæˆã•ã‚Œã‚‹
- [ ] æ–°è¦ãƒšãƒ¼ã‚¸ä½œæˆæ™‚ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆã«è‡ªå‹•ãƒªãƒ³ã‚¯
- [ ] æ—¢å­˜ãƒšãƒ¼ã‚¸ãŒã™ã¹ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆã«ãƒªãƒ³ã‚¯ã•ã‚Œã¦ã„ã‚‹

### ãƒªã‚¹ã‚¯è©•ä¾¡
**ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«**: ğŸŸ¢ ä½

- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒˆãƒªã‚¬ãƒ¼ã®å‰¯ä½œç”¨ãŒé™å®šçš„
- æ—¢å­˜æ©Ÿèƒ½ã¸ã®å½±éŸ¿ãŒæœ€å°é™

---

## Phase 2: ãƒ«ãƒ¼ãƒˆçµ±åˆï¼ˆãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰ âœ… å®Œäº†

### ç›®æ¨™
`/pages` ã¨ `/pages/[id]` ã‚’ `/notes/all-pages` ã¨ `/notes/all-pages/[id]` ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ

### å®Ÿè£…å†…å®¹

#### 2.1 `/pages` ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ âœ…
**ãƒ•ã‚¡ã‚¤ãƒ«**: `app/(protected)/pages/page.tsx`

```typescript
export default async function PagesPage() {
  const supabase = await createClient();
  const { data: { user } } = await supabase.auth.getUser();

  if (!user) {
    redirect("/auth/login");
  }

  // Redirect to default note
  redirect("/notes/all-pages");
}
```

#### 2.2 `/pages/[id]` è©³ç´°ãƒšãƒ¼ã‚¸ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ âœ…
**ãƒ•ã‚¡ã‚¤ãƒ«**: `app/(protected)/pages/[id]/page.tsx`

```typescript
export default async function PageDetail({ params }: { params: Promise<{ id: string }> }) {
  const supabase = await createClient();
  const { data: { user } } = await supabase.auth.getUser();
  if (!user) redirect("/auth/login");

  const { id: rawSlug } = await params;
  const slug = decodeURIComponent(rawSlug);

  // Redirect to default note page
  redirect(`/notes/all-pages/${encodeURIComponent(slug)}`);
}
```

### ãƒ†ã‚¹ãƒˆé …ç›®
- [ ] `/pages` ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ `/notes/all-pages` ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- [ ] `/pages/[id]` ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ `/notes/all-pages/[id]` ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- [ ] ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒæ­£å¸¸ã«å‹•ä½œ
- [ ] å¤–éƒ¨ãƒªãƒ³ã‚¯ã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒæ­£å¸¸ã«å‹•ä½œ

### ãƒªã‚¹ã‚¯è©•ä¾¡
**ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«**: ğŸŸ¡ ä¸­

- æ—¢å­˜ã®ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ»ãƒªãƒ³ã‚¯ãŒç„¡åŠ¹ã«ãªã‚‹å¯èƒ½æ€§
- 301ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã§å¯¾å¿œï¼ˆSEOã«ã‚‚é…æ…®ï¼‰

**å¯¾ç­–**:
- ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆå®Ÿè£…å¾Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥
- ä¸€å®šæœŸé–“ã€ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’ç¶­æŒ

---

## Phase 3: UIãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±åˆ â³ æœªç€æ‰‹

### ç›®æ¨™
é‡è¤‡ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ±åˆã—ã€ã‚³ãƒ¼ãƒ‰ã®ä¿å®ˆæ€§ã‚’å‘ä¸Š

### å®Ÿè£…å†…å®¹

#### 3.1 `pages-list.tsx` ã®çµ±åˆ
**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**:
- `app/(protected)/pages/_components/pages-list.tsx` (å‰Šé™¤äºˆå®š)
- `app/(protected)/notes/[slug]/_components/pages-list.tsx` (çµ±åˆå…ˆ)

**çµ±åˆå¾Œã®é…ç½®**:
```
components/notes/PagesList/
â”œâ”€â”€ PagesList.tsx          # çµ±åˆå¾Œã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ PagesList.spec.md      # ä»•æ§˜æ›¸
â”œâ”€â”€ PagesList.test.tsx     # ãƒ†ã‚¹ãƒˆ
â””â”€â”€ index.ts
```

**çµ±åˆæ–¹é‡**:
- `/notes/[slug]` å´ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ™ãƒ¼ã‚¹ã«çµ±åˆ
- `slug` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å¿…é ˆåŒ–
- `PageCard` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’æ´»ç”¨

#### 3.2 `page-form.tsx` ã®çµ±åˆ
**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**:
- `app/(protected)/pages/_components/page-form.tsx`

**çµ±åˆæ–¹é‡**:
- ãƒãƒ¼ãƒˆé¸æŠæ©Ÿèƒ½ã‚’è¿½åŠ 
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ `all-pages` ã‚’é¸æŠ

#### 3.3 ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®æ›´æ–°
**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**:
- `components/main-nav.tsx`
- `components/mobile-nav.tsx`

**å¤‰æ›´å†…å®¹**:
- `/pages` ãƒªãƒ³ã‚¯ã‚’å‰Šé™¤ã¾ãŸã¯ `/notes/all-pages` ã«å¤‰æ›´
- ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‹ã‚‰ã€Œãƒšãƒ¼ã‚¸ä¸€è¦§ã€ã‚’å‰Šé™¤

### ãƒ†ã‚¹ãƒˆé …ç›®
- [ ] ãƒšãƒ¼ã‚¸ãƒªã‚¹ãƒˆãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ãƒšãƒ¼ã‚¸ä½œæˆãƒ•ã‚©ãƒ¼ãƒ ãŒæ­£å¸¸ã«å‹•ä½œ
- [ ] ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£ã—ãå‹•ä½œ

### ãƒªã‚¹ã‚¯è©•ä¾¡
**ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«**: ğŸŸ¡ ä¸­

- ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®å¾®å¦™ãªå·®ç•°ã«æ³¨æ„ãŒå¿…è¦
- ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’å¼·åŒ–ã—ã¦å¯¾å¿œ

---

## Phase 4: Server Actions çµ±åˆ â³ æœªç€æ‰‹

### ç›®æ¨™
`/pages` å°‚ç”¨ã® Server Actions ã‚’å»ƒæ­¢ã—ã€`/notes` ã® Actions ã«çµ±ä¸€

### å®Ÿè£…å†…å®¹

#### 4.1 `getPagesByUser` ã®å»ƒæ­¢
**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**: `app/_actions/pages.ts`

**ä»£æ›¿æ‰‹æ®µ**:
```typescript
// Before
const { pages } = await getPagesByUser(userId);

// After
const { pages } = await getNotePages({ slug: "all-pages", limit: 100, offset: 0, sortBy: "updated" });
```

#### 4.2 æ—¢å­˜ã®å‘¼ã³å‡ºã—å…ƒã‚’ç‰¹å®š
```bash
# ä½¿ç”¨ç®‡æ‰€ã‚’æ¤œç´¢
grep -r "getPagesByUser" app/
grep -r "from.*pages.ts" app/
```

#### 4.3 æ®µéšçš„ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
1. å‘¼ã³å‡ºã—å…ƒã‚’1ã¤ãšã¤ä¿®æ­£
2. å„ä¿®æ­£å¾Œã«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
3. ã™ã¹ã¦ã®å‘¼ã³å‡ºã—å…ƒã‚’ä¿®æ­£ã—ãŸã‚‰ `getPagesByUser` ã‚’å‰Šé™¤

### ãƒ†ã‚¹ãƒˆé …ç›®
- [ ] ã™ã¹ã¦ã®ãƒšãƒ¼ã‚¸å–å¾—å‡¦ç†ãŒæ­£å¸¸ã«å‹•ä½œ
- [ ] ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ãŒæ­£å¸¸ã«å‹•ä½œ
- [ ] ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ãŒæ­£å¸¸ã«å‹•ä½œ

### ãƒªã‚¹ã‚¯è©•ä¾¡
**ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«**: ğŸ”´ é«˜

- æ—¢å­˜ã‚³ãƒ¼ãƒ‰ã®å¤§å¹…ãªä¿®æ­£ãŒå¿…è¦
- å½±éŸ¿ç¯„å›²ãŒåºƒã„

**å¯¾ç­–**:
- æ®µéšçš„ã«ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°
- E2Eãƒ†ã‚¹ãƒˆã§æ¤œè¨¼
- ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨ˆç”»ã‚’æº–å‚™

---

## Phase 5: `/pages` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå‰Šé™¤ â³ æœªç€æ‰‹

### ç›®æ¨™
å®Œå…¨ã« `/notes` ã«çµ±åˆã—ã€ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤

### å®Ÿè£…å†…å®¹

#### 5.1 å‰Šé™¤å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«
```
app/(protected)/pages/
â”œâ”€â”€ page.tsx                     # Phase 2ã§ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã«å¤‰æ›´æ¸ˆã¿
â”œâ”€â”€ page-client.tsx              # å‰Šé™¤
â”œâ”€â”€ [id]/
â”‚   â”œâ”€â”€ page.tsx                 # Phase 2ã§ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã«å¤‰æ›´æ¸ˆã¿
â”‚   â””â”€â”€ _components/
â”‚       â”œâ”€â”€ EditPageForm.tsx     # ç§»å‹•æ¸ˆã¿ï¼ˆnoteså´ã§å…±é€šåˆ©ç”¨ï¼‰
â”‚       â”œâ”€â”€ page-header.tsx      # å‰Šé™¤
â”‚       â””â”€â”€ ...                  # ä»–ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚å‰Šé™¤
â””â”€â”€ _components/
    â”œâ”€â”€ pages-list.tsx           # Phase 3ã§çµ±åˆæ¸ˆã¿
    â”œâ”€â”€ page-form.tsx            # Phase 3ã§çµ±åˆæ¸ˆã¿
    â””â”€â”€ ...
```

#### 5.2 å‰Šé™¤æ‰‹é †
1. Phase 4 ãŒå®Œå…¨ã«å®Œäº†ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª
2. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–å¾—
3. ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤
4. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
5. å•é¡Œãªã‘ã‚Œã°ã‚³ãƒŸãƒƒãƒˆ

### ãƒ†ã‚¹ãƒˆé …ç›®
- [ ] ã™ã¹ã¦ã®æ©Ÿèƒ½ãŒæ­£å¸¸ã«å‹•ä½œ
- [ ] ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒãªã„
- [ ] E2Eãƒ†ã‚¹ãƒˆãŒå…¨ã¦ãƒ‘ã‚¹

### ãƒªã‚¹ã‚¯è©•ä¾¡
**ãƒªã‚¹ã‚¯ãƒ¬ãƒ™ãƒ«**: ğŸŸ¢ ä½

- Phase 4 å®Œäº†å¾Œãªã®ã§å½±éŸ¿ã¯é™å®šçš„

---

## ğŸ” ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ
- [ ] `ensureDefaultNote()` ã®ãƒ†ã‚¹ãƒˆ
- [ ] `linkPageToDefaultNote()` ã®ãƒ†ã‚¹ãƒˆ
- [ ] `getDefaultNote()` ã®ãƒ†ã‚¹ãƒˆ

### çµ±åˆãƒ†ã‚¹ãƒˆ
- [ ] ãƒšãƒ¼ã‚¸ä½œæˆæ™‚ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆãƒªãƒ³ã‚¯
- [ ] ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã®å‹•ä½œç¢ºèª

### E2Eãƒ†ã‚¹ãƒˆ
- [ ] `/pages` ã‹ã‚‰ `/notes/all-pages` ã¸ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
- [ ] ãƒšãƒ¼ã‚¸ä¸€è¦§è¡¨ç¤º
- [ ] ãƒšãƒ¼ã‚¸ä½œæˆãƒ•ãƒ­ãƒ¼
- [ ] ãƒšãƒ¼ã‚¸ç·¨é›†ãƒ•ãƒ­ãƒ¼

---

## ğŸ“Š é€²æ—ç®¡ç†

### ç¾åœ¨ã®é€²æ—
- âœ… Phase 1: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆå°å…¥ (100%)
- âœ… Phase 2: ãƒ«ãƒ¼ãƒˆçµ±åˆ (100%)
- â³ Phase 3: UIçµ±åˆ (0%)
- â³ Phase 4: Actionsçµ±åˆ (0%)
- â³ Phase 5: ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ— (0%)

**å…¨ä½“é€²æ—**: 40% (2/5 ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†)

---

## ğŸš¨ ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨ˆç”»

### Phase 1 ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
```sql
-- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒãƒ¼ãƒˆã‚’å‰Šé™¤
DELETE FROM public.notes WHERE slug = 'all-pages';

-- ãƒˆãƒªã‚¬ãƒ¼ã‚’å‰Šé™¤
DROP TRIGGER IF EXISTS trg_create_default_note ON public.accounts;
DROP FUNCTION IF EXISTS public.create_default_note_for_user();
```

### Phase 2 ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
- `app/(protected)/pages/page.tsx` ã‚’å…ƒã®å®Ÿè£…ã«æˆ»ã™
- `app/(protected)/pages/[id]/page.tsx` ã‚’å…ƒã®å®Ÿè£…ã«æˆ»ã™

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [çµ±åˆå¯èƒ½æ€§åˆ†æãƒ¬ãƒãƒ¼ãƒˆ](../../02_research/2025_10/20251028_01_pages-notes-consolidation-analysis.md)
- [ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ](../../database/migrations/20251028_create_default_notes.sql)
- [ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°å®Ÿè£…](../../app/_actions/notes/getDefaultNote.ts)

---

## ğŸ“ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### å³åº§ã«å®Ÿæ–½
1. âœ… Phase 1 ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æœ¬ç•ªç’°å¢ƒã«é©ç”¨
2. âœ… Phase 2 ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’ãƒ‡ãƒ—ãƒ­ã‚¤
3. â³ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®é€šçŸ¥ã‚’æº–å‚™

### ä»Šå¾Œå®Ÿæ–½
4. â³ Phase 3 ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆçµ±åˆã‚’é–‹å§‹
5. â³ Phase 4 ã® Server Actions çµ±åˆã‚’è¨ˆç”»
6. â³ E2Eãƒ†ã‚¹ãƒˆã‚’å¼·åŒ–

---

**ä½œæˆè€…**: AI Assistant (GitHub Copilot)
**æœ€çµ‚æ›´æ–°**: 2025-10-28
