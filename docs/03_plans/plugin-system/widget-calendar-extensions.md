# ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ : Widgetãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° & ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIæ‹¡å¼µæ©Ÿèƒ½

**ä½œæˆæ—¥**: 2025-11-05  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: ğŸ”„ å®Ÿè£…ä¸­  
**é–¢é€£Issue**: [#109](https://github.com/otomatty/for-all-learners/issues/109), [#97](https://github.com/otomatty/for-all-learners/issues/97)  
**å‰ææ¡ä»¶**: Phase 1, Phase 2, Phase 3å®Œäº† âœ…

---

## æ¦‚è¦

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã«ä»¥ä¸‹ã®2ã¤ã®æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã™ï¼š

1. **Widgetãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ©Ÿèƒ½**: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒç™»éŒ²ã—ãŸWidgetã‚’ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§è¡¨ç¤º
2. **ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIæ‹¡å¼µæ©Ÿèƒ½**: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIã«ç‹¬è‡ªãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º

ã“ã‚Œã‚‰ã®æ©Ÿèƒ½ã«ã‚ˆã‚Šã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºè€…ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ‹¡å¼µãŒå¯èƒ½ã«ãªã‚Šã¾ã™ï¼š
- GitHubã‚³ãƒŸãƒƒãƒˆè¡Œæ•°ã‚’1æ—¥ã”ã¨ã«å–å¾—ã—ã¦ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¡¨ç¤º
- æ—¥è¨˜ä½œæˆæ™‚ã«ç‹¬è‡ªã®ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’è¡¨ç¤º
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ä¸Šã«ã‚«ã‚¹ã‚¿ãƒ çµ±è¨ˆæƒ…å ±ã‚’è¡¨ç¤º

---

## å®Ÿè£…ç›®æ¨™

### ä¸»è¦ç›®æ¨™

1. **Widgetãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ©Ÿèƒ½**: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒç™»éŒ²ã—ãŸWidgetã‚’ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§è¡¨ç¤º
2. **ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIæ‹¡å¼µãƒã‚¤ãƒ³ãƒˆ**: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIã«ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã§ãã‚‹ä»•çµ„ã¿
3. **GitHub APIé€£æº**: Integration ExtensionçµŒç”±ã§GitHub APIã‚’å‘¼ã³å‡ºã—
4. **ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³**: GitHubã‚³ãƒŸãƒƒãƒˆè¡Œæ•°è¡¨ç¤ºãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å®Ÿè£…

---

## å®Ÿè£…é †åº

### Phase 1: Widgetãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ©Ÿèƒ½ã®åŸºç›¤å®Ÿè£…ï¼ˆæ¨å®š: 6æ™‚é–“ï¼‰

#### 1.1 Widgetãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å®Ÿè£…ï¼ˆæ¨å®š: 3æ™‚é–“ï¼‰

**ç›®çš„**: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒç™»éŒ²ã—ãŸWidgetã‚’ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§è¡¨ç¤ºã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

**å®Ÿè£…å†…å®¹**:

- [ ] `components/plugins/PluginWidgetRenderer.tsx`: Widgetãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  - [ ] `ui-registry.getWidgets()` ã§Widgetä¸€è¦§ã‚’å–å¾—
  - [ ] Widgetã® `render()` é–¢æ•°ã‚’å®Ÿè¡Œ
  - [ ] `WidgetRenderResult` ã‚’Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å¤‰æ›
  - [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯è¡¨ç¤ºï¼‰
  - [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã®è¡¨ç¤º

- [ ] `components/plugins/PluginWidgetContainer.tsx`: Widgetã‚³ãƒ³ãƒ†ãƒŠã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  - [ ] Widgetã®ã‚µã‚¤ã‚ºã¨ä½ç½®ã«å¿œã˜ãŸãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
  - [ ] ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§ã®ä½ç½®å¤‰æ›´ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
  - [ ] Widgetè¨­å®šãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã®è¡¨ç¤º

- [ ] `app/(protected)/dashboard/_components/PluginWidgetsSection.tsx`: Widgetã‚»ã‚¯ã‚·ãƒ§ãƒ³
  - [ ] ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«Widgetã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
  - [ ] ä½ç½®åˆ¥ã«Widgetã‚’ã‚°ãƒ«ãƒ¼ãƒ—åŒ–ï¼ˆtop-left, top-right, bottom-left, bottom-rightï¼‰
  - [ ] ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã§è¡¨ç¤º

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `components/plugins/PluginWidgetRenderer.tsx`: Widgetãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `components/plugins/PluginWidgetContainer.tsx`: Widgetã‚³ãƒ³ãƒ†ãƒŠã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `app/(protected)/dashboard/_components/PluginWidgetsSection.tsx`: Widgetã‚»ã‚¯ã‚·ãƒ§ãƒ³

**ãƒ†ã‚¹ãƒˆ**:
- [ ] Widgetãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ãƒ†ã‚¹ãƒˆ
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ†ã‚¹ãƒˆ
- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ã®ãƒ†ã‚¹ãƒˆ

#### 1.2 ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã¸ã®çµ±åˆï¼ˆæ¨å®š: 1æ™‚é–“ï¼‰

**ç›®çš„**: Widgetã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã«è¿½åŠ 

**å®Ÿè£…å†…å®¹**:

- [ ] `app/(protected)/dashboard/page.tsx`: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã«Widgetã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ 
  - [ ] `PluginWidgetsSection` ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
  - [ ] é©åˆ‡ãªä½ç½®ã«Widgetã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’é…ç½®

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `app/(protected)/dashboard/page.tsx`: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸

#### 1.3 Widgetãƒ‡ãƒ¼ã‚¿å–å¾—ã®Server Actionï¼ˆæ¨å®š: 2æ™‚é–“ï¼‰

**ç›®çš„**: ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§Widgetãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹API

**å®Ÿè£…å†…å®¹**:

- [ ] `app/_actions/plugin-widgets.ts`: Widgetå–å¾—Server Action
  - [ ] `getWidgets()`: ç™»éŒ²æ¸ˆã¿Widgetä¸€è¦§ã‚’å–å¾—
  - [ ] `renderWidget()`: Widgetã®renderé–¢æ•°ã‚’å®Ÿè¡Œã—ã¦çµæœã‚’å–å¾—
  - [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `app/_actions/plugin-widgets.ts`: Widgetå–å¾—Server Action

**ãƒ†ã‚¹ãƒˆ**:
- [ ] Server Actionã®ãƒ†ã‚¹ãƒˆ

---

### Phase 2: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIæ‹¡å¼µãƒã‚¤ãƒ³ãƒˆã®å®Ÿè£…ï¼ˆæ¨å®š: 8æ™‚é–“ï¼‰

#### 2.1 ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µãƒã‚¤ãƒ³ãƒˆAPIã®å®Ÿè£…ï¼ˆæ¨å®š: 4æ™‚é–“ï¼‰

**ç›®çš„**: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIã«ãƒ‡ãƒ¼ã‚¿ã‚’è¿½åŠ ã§ãã‚‹API

**å®Ÿè£…å†…å®¹**:

- [ ] `lib/plugins/calendar-registry.ts`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µãƒ¬ã‚¸ã‚¹ãƒˆãƒªï¼ˆæ–°è¦ä½œæˆï¼‰
  - [ ] `registerCalendarExtension()`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µã‚’ç™»éŒ²
  - [ ] `unregisterCalendarExtension()`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µã‚’å‰Šé™¤
  - [ ] `getCalendarExtensions()`: ç™»éŒ²æ¸ˆã¿æ‹¡å¼µã‚’å–å¾—
  - [ ] `getCalendarData()`: æ‹¡å¼µãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ãƒãƒ¼ã‚¸

**å®Ÿè£…å†…å®¹ï¼ˆè©³ç´°ï¼‰**:

```typescript
// lib/plugins/calendar-registry.ts

export interface CalendarExtensionOptions {
  id: string;
  pluginId: string;
  name: string;
  description?: string;
  
  // æ—¥ä»˜ã”ã¨ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹é–¢æ•°
  getDailyData: (date: string) => Promise<CalendarExtensionData>;
}

export interface CalendarExtensionData {
  // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚»ãƒ«ã«è¡¨ç¤ºã™ã‚‹è¿½åŠ æƒ…å ±
  badge?: string; // ãƒãƒƒã‚¸ãƒ†ã‚­ã‚¹ãƒˆ
  badgeColor?: string; // ãƒãƒƒã‚¸ã®è‰²
  tooltip?: string; // ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ãƒ†ã‚­ã‚¹ãƒˆ
  
  // è©³ç´°ãƒ‘ãƒãƒ«ã«è¡¨ç¤ºã™ã‚‹è¿½åŠ ã‚»ã‚¯ã‚·ãƒ§ãƒ³
  detailSections?: CalendarDetailSection[];
}

export interface CalendarDetailSection {
  title: string;
  content: string | React.ReactNode; // å°†æ¥çš„ã«ã¯Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚‚ã‚µãƒãƒ¼ãƒˆ
}
```

- [ ] `lib/plugins/types.ts`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µé–¢é€£ã®å‹å®šç¾©ã‚’è¿½åŠ 
- [ ] `lib/plugins/plugin-api.ts`: Calendar APIã‚’è¿½åŠ 
  - [ ] `api.calendar.registerExtension()`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µã‚’ç™»éŒ²
  - [ ] `api.calendar.unregisterExtension()`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µã‚’å‰Šé™¤

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `lib/plugins/calendar-registry.ts`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µãƒ¬ã‚¸ã‚¹ãƒˆãƒª
- `lib/plugins/types.ts`: å‹å®šç¾©è¿½åŠ 
- `lib/plugins/plugin-api.ts`: Calendar APIè¿½åŠ 

**ãƒ†ã‚¹ãƒˆ**:
- [ ] ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µãƒ¬ã‚¸ã‚¹ãƒˆãƒªã®ãƒ†ã‚¹ãƒˆ
- [ ] Calendar APIã®ãƒ†ã‚¹ãƒˆ

#### 2.2 ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æ‹¡å¼µï¼ˆæ¨å®š: 4æ™‚é–“ï¼‰

**ç›®çš„**: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º

**å®Ÿè£…å†…å®¹**:

- [ ] `app/(protected)/dashboard/_components/ActivityCalendar/types.ts`: å‹å®šç¾©æ‹¡å¼µ
  - [ ] `DailyActivitySummary` ã« `pluginExtensions?: CalendarExtensionData[]` ã‚’è¿½åŠ 

- [ ] `app/_actions/activity_calendar.ts`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ‡ãƒ¼ã‚¿å–å¾—æ™‚ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒ¼ã‚¸
  - [ ] `getMonthlyActivitySummary()` å†…ã§ `calendar-registry.getCalendarExtensions()` ã‚’å‘¼ã³å‡ºã—
  - [ ] å„æ—¥ã®ãƒ‡ãƒ¼ã‚¿ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’ãƒãƒ¼ã‚¸

- [ ] `app/(protected)/dashboard/_components/ActivityCalendar/DayCell.tsx`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚»ãƒ«ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
  - [ ] ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒã‚¸ã‚’è¡¨ç¤º
  - [ ] ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º

- [ ] `app/(protected)/dashboard/_components/ActivityCalendar/DayDetailPanel.tsx`: è©³ç´°ãƒ‘ãƒãƒ«ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤º
  - [ ] ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ã®è©³ç´°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `app/(protected)/dashboard/_components/ActivityCalendar/types.ts`: å‹å®šç¾©æ‹¡å¼µ
- `app/_actions/activity_calendar.ts`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ‡ãƒ¼ã‚¿å–å¾—æ‹¡å¼µ
- `app/(protected)/dashboard/_components/ActivityCalendar/DayCell.tsx`: ã‚»ãƒ«è¡¨ç¤ºæ‹¡å¼µ
- `app/(protected)/dashboard/_components/ActivityCalendar/DayDetailPanel.tsx`: è©³ç´°ãƒ‘ãƒãƒ«æ‹¡å¼µ

**ãƒ†ã‚¹ãƒˆ**:
- [ ] ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ
- [ ] ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿è¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆ

---

### Phase 3: GitHub APIé€£æºæ©Ÿèƒ½ã®å®Ÿè£…ï¼ˆæ¨å®š: 4æ™‚é–“ï¼‰

#### 3.1 GitHub APIå‘¼ã³å‡ºã—ãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼ˆæ¨å®š: 2æ™‚é–“ï¼‰

**ç›®çš„**: Integration ExtensionçµŒç”±ã§GitHub APIã‚’å‘¼ã³å‡ºã™ãŸã‚ã®ãƒ˜ãƒ«ãƒ‘ãƒ¼

**å®Ÿè£…å†…å®¹**:

- [ ] `lib/plugins/integration-helpers/github-api.ts`: GitHub APIãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼ˆæ–°è¦ä½œæˆï¼‰
  - [ ] `getCommitsByDate()`: æ—¥ä»˜ã”ã¨ã®ã‚³ãƒŸãƒƒãƒˆã‚’å–å¾—
  - [ ] `getCommitStats()`: ã‚³ãƒŸãƒƒãƒˆã®çµ±è¨ˆæƒ…å ±ï¼ˆè¿½åŠ è¡Œæ•°ã€å‰Šé™¤è¡Œæ•°ï¼‰ã‚’å–å¾—
  - [ ] `getDailyCommitLines()`: æ—¥åˆ¥ã®ã‚³ãƒŸãƒƒãƒˆè¡Œæ•°ã‚’å–å¾—

**å®Ÿè£…å†…å®¹ï¼ˆè©³ç´°ï¼‰**:

```typescript
// lib/plugins/integration-helpers/github-api.ts

export interface GitHubCommitStats {
  date: string; // YYYY-MM-DD
  commits: number;
  additions: number;
  deletions: number;
  netLines: number; // additions - deletions
}

export async function getDailyCommitLines(
  owner: string,
  repo: string,
  date: string,
  api: IntegrationAPI
): Promise<GitHubCommitStats> {
  // GitHub APIã‚’å‘¼ã³å‡ºã—ã¦ã‚³ãƒŸãƒƒãƒˆçµ±è¨ˆã‚’å–å¾—
  // api.integration.callExternalAPI() ã‚’ä½¿ç”¨
}
```

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `lib/plugins/integration-helpers/github-api.ts`: GitHub APIãƒ˜ãƒ«ãƒ‘ãƒ¼

**ãƒ†ã‚¹ãƒˆ**:
- [ ] GitHub APIãƒ˜ãƒ«ãƒ‘ãƒ¼ã®ãƒ†ã‚¹ãƒˆ

#### 3.2 GitHubèªè¨¼ç®¡ç†ï¼ˆæ¨å®š: 2æ™‚é–“ï¼‰

**ç›®çš„**: GitHub OAuthèªè¨¼ã®ç®¡ç†

**å®Ÿè£…å†…å®¹**:

- [ ] `lib/plugins/integration-helpers/github-auth.ts`: GitHubèªè¨¼ãƒ˜ãƒ«ãƒ‘ãƒ¼ï¼ˆæ–°è¦ä½œæˆï¼‰
  - [ ] OAuthèªè¨¼ãƒ•ãƒ­ãƒ¼ã®å®Ÿè£…
  - [ ] ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã®ä¿å­˜ãƒ»å–å¾—ï¼ˆStorage APIçµŒç”±ï¼‰
  - [ ] ãƒˆãƒ¼ã‚¯ãƒ³ã®ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `lib/plugins/integration-helpers/github-auth.ts`: GitHubèªè¨¼ãƒ˜ãƒ«ãƒ‘ãƒ¼

**ãƒ†ã‚¹ãƒˆ**:
- [ ] GitHubèªè¨¼ãƒ˜ãƒ«ãƒ‘ãƒ¼ã®ãƒ†ã‚¹ãƒˆ

---

### Phase 4: GitHubã‚³ãƒŸãƒƒãƒˆè¡Œæ•°è¡¨ç¤ºãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å®Ÿè£…ï¼ˆæ¨å®š: 8æ™‚é–“ï¼‰

#### 4.1 ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®åŸºæœ¬æ§‹é€ ï¼ˆæ¨å®š: 2æ™‚é–“ï¼‰

**ç›®çš„**: GitHubã‚³ãƒŸãƒƒãƒˆè¡Œæ•°è¡¨ç¤ºãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®åŸºæœ¬æ§‹é€ 

**å®Ÿè£…å†…å®¹**:

- [ ] `plugins/examples/github-commit-stats/`: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆæ–°è¦ä½œæˆï¼‰
  - [ ] `plugin.json`: ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
  - [ ] `src/index.ts`: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰
  - [ ] `package.json`: ä¾å­˜é–¢ä¿‚

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `plugins/examples/github-commit-stats/plugin.json`: ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ
- `plugins/examples/github-commit-stats/src/index.ts`: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰
- `plugins/examples/github-commit-stats/package.json`: ä¾å­˜é–¢ä¿‚

#### 4.2 ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µã®å®Ÿè£…ï¼ˆæ¨å®š: 3æ™‚é–“ï¼‰

**ç›®çš„**: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIã«GitHubã‚³ãƒŸãƒƒãƒˆè¡Œæ•°ã‚’è¡¨ç¤º

**å®Ÿè£…å†…å®¹**:

- [ ] `plugins/examples/github-commit-stats/src/index.ts`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µã®å®Ÿè£…
  - [ ] `api.calendar.registerExtension()` ã§ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µã‚’ç™»éŒ²
  - [ ] `getDailyData()` é–¢æ•°ã§GitHub APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
  - [ ] ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚»ãƒ«ã«ã‚³ãƒŸãƒƒãƒˆè¡Œæ•°ã®ãƒãƒƒã‚¸ã‚’è¡¨ç¤º
  - [ ] è©³ç´°ãƒ‘ãƒãƒ«ã«ã‚³ãƒŸãƒƒãƒˆçµ±è¨ˆã‚’è¡¨ç¤º

**å®Ÿè£…å†…å®¹ï¼ˆè©³ç´°ï¼‰**:

```typescript
// plugins/examples/github-commit-stats/src/index.ts

async function activate(api: PluginAPI, config?: Record<string, unknown>) {
  // GitHubèªè¨¼
  const githubToken = await api.storage.get<string>('github_token');
  
  // ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µã‚’ç™»éŒ²
  await api.calendar.registerExtension({
    id: 'github-commit-stats',
    name: 'GitHubã‚³ãƒŸãƒƒãƒˆçµ±è¨ˆ',
    description: 'GitHubã‚³ãƒŸãƒƒãƒˆè¡Œæ•°ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¡¨ç¤º',
    async getDailyData(date: string): Promise<CalendarExtensionData> {
      const stats = await getDailyCommitLines(
        config?.owner as string,
        config?.repo as string,
        date,
        api.integration
      );
      
      return {
        badge: `${stats.netLines > 0 ? '+' : ''}${stats.netLines}`,
        badgeColor: stats.netLines > 0 ? 'green' : stats.netLines < 0 ? 'red' : 'gray',
        tooltip: `ã‚³ãƒŸãƒƒãƒˆ: ${stats.commits}ä»¶, è¿½åŠ : +${stats.additions}, å‰Šé™¤: -${stats.deletions}`,
        detailSections: [{
          title: 'GitHubã‚³ãƒŸãƒƒãƒˆçµ±è¨ˆ',
          content: `ã‚³ãƒŸãƒƒãƒˆæ•°: ${stats.commits}ä»¶\nè¿½åŠ è¡Œæ•°: +${stats.additions}\nå‰Šé™¤è¡Œæ•°: -${stats.deletions}\nç´”å¢—è¡Œæ•°: ${stats.netLines > 0 ? '+' : ''}${stats.netLines}`
        }]
      };
    }
  });
  
  return {
    dispose: async () => {
      await api.calendar.unregisterExtension('github-commit-stats');
    }
  };
}
```

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `plugins/examples/github-commit-stats/src/index.ts`: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰

#### 4.3 Widgetè¡¨ç¤ºã®å®Ÿè£…ï¼ˆæ¨å®š: 2æ™‚é–“ï¼‰

**ç›®çš„**: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«GitHubã‚³ãƒŸãƒƒãƒˆçµ±è¨ˆWidgetã‚’è¡¨ç¤º

**å®Ÿè£…å†…å®¹**:

- [ ] `plugins/examples/github-commit-stats/src/index.ts`: Widgetç™»éŒ²ã®å®Ÿè£…
  - [ ] `api.ui.registerWidget()` ã§Widgetã‚’ç™»éŒ²
  - [ ] Widgetã®renderé–¢æ•°ã§GitHubã‚³ãƒŸãƒƒãƒˆçµ±è¨ˆã‚’è¡¨ç¤º
  - [ ] ä»Šæœˆã®åˆè¨ˆã‚³ãƒŸãƒƒãƒˆè¡Œæ•°ã‚’è¡¨ç¤º

**å®Ÿè£…å†…å®¹ï¼ˆè©³ç´°ï¼‰**:

```typescript
// plugins/examples/github-commit-stats/src/index.ts

await api.ui.registerWidget({
  id: 'github-commit-stats-widget',
  name: 'GitHubã‚³ãƒŸãƒƒãƒˆçµ±è¨ˆ',
  description: 'ä»Šæœˆã®GitHubã‚³ãƒŸãƒƒãƒˆè¡Œæ•°ã‚’è¡¨ç¤º',
  position: 'top-right',
  size: 'medium',
  async render(context) {
    const today = new Date();
    const year = today.getFullYear();
    const month = today.getMonth() + 1;
    
    // ä»Šæœˆã®åˆè¨ˆã‚³ãƒŸãƒƒãƒˆè¡Œæ•°ã‚’å–å¾—
    const monthlyStats = await getMonthlyCommitLines(
      config?.owner as string,
      config?.repo as string,
      year,
      month,
      api.integration
    );
    
    return {
      type: 'github-commit-stats',
      props: {
        totalCommits: monthlyStats.totalCommits,
        totalAdditions: monthlyStats.totalAdditions,
        totalDeletions: monthlyStats.totalDeletions,
        netLines: monthlyStats.netLines
      }
    };
  }
});
```

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `plugins/examples/github-commit-stats/src/index.ts`: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰

#### 4.4 ã‚¨ãƒ‡ã‚£ã‚¿æ‹¡å¼µã®å®Ÿè£…ï¼ˆæ¨å®š: 1æ™‚é–“ï¼‰

**ç›®çš„**: æ—¥è¨˜ä½œæˆæ™‚ã«GitHubã‚³ãƒŸãƒƒãƒˆè¡Œæ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’è¡¨ç¤º

**å®Ÿè£…å†…å®¹**:

- [ ] `plugins/examples/github-commit-stats/src/index.ts`: ã‚¨ãƒ‡ã‚£ã‚¿æ‹¡å¼µã®å®Ÿè£…
  - [ ] ã‚«ã‚¹ã‚¿ãƒ ãƒãƒ¼ãƒ‰ã¨ã—ã¦ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚’è¡¨ç¤º
  - [ ] ã‚¨ãƒ‡ã‚£ã‚¿å†…ã«GitHubã‚³ãƒŸãƒƒãƒˆè¡Œæ•°ã‚’è¡¨ç¤º

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `plugins/examples/github-commit-stats/src/index.ts`: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰

---

### Phase 5: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ãƒ†ã‚¹ãƒˆï¼ˆæ¨å®š: 4æ™‚é–“ï¼‰

#### 5.1 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆï¼ˆæ¨å®š: 2æ™‚é–“ï¼‰

**ç›®çš„**: æ–°æ©Ÿèƒ½ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆ

**å®Ÿè£…å†…å®¹**:

- [ ] `docs/guides/plugin-development/widget-rendering.md`: Widgetãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ©Ÿèƒ½ã®èª¬æ˜
- [ ] `docs/guides/plugin-development/calendar-extensions.md`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µæ©Ÿèƒ½ã®èª¬æ˜
- [ ] `docs/guides/plugin-development/examples/github-commit-stats.md`: ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®èª¬æ˜

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `docs/guides/plugin-development/widget-rendering.md`: Widgetãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚¬ã‚¤ãƒ‰
- `docs/guides/plugin-development/calendar-extensions.md`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µã‚¬ã‚¤ãƒ‰
- `docs/guides/plugin-development/examples/github-commit-stats.md`: ã‚µãƒ³ãƒ—ãƒ«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¬ã‚¤ãƒ‰

#### 5.2 ãƒ†ã‚¹ãƒˆå®Ÿè£…ï¼ˆæ¨å®š: 2æ™‚é–“ï¼‰

**ç›®çš„**: æ–°æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆ

**å®Ÿè£…å†…å®¹**:

- [ ] `lib/plugins/__tests__/calendar-registry.test.ts`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µãƒ¬ã‚¸ã‚¹ãƒˆãƒªã®ãƒ†ã‚¹ãƒˆ
- [ ] `components/plugins/__tests__/PluginWidgetRenderer.test.tsx`: Widgetãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ
- [ ] `app/_actions/__tests__/plugin-widgets.test.ts`: Widgetå–å¾—Server Actionã®ãƒ†ã‚¹ãƒˆ

**å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«**:
- `lib/plugins/__tests__/calendar-registry.test.ts`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ‹¡å¼µãƒ¬ã‚¸ã‚¹ãƒˆãƒªãƒ†ã‚¹ãƒˆ
- `components/plugins/__tests__/PluginWidgetRenderer.test.tsx`: Widgetãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ
- `app/_actions/__tests__/plugin-widgets.test.ts`: Widgetå–å¾—ãƒ†ã‚¹ãƒˆ

---

## æ¨å®šæ™‚é–“

### å„Phaseã®æ¨å®šæ™‚é–“

| Phase | é …ç›® | æ¨å®šæ™‚é–“ |
|------|------|---------|
| Phase 1 | Widgetãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ©Ÿèƒ½ã®åŸºç›¤å®Ÿè£… | 6æ™‚é–“ |
| Phase 2 | ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIæ‹¡å¼µãƒã‚¤ãƒ³ãƒˆã®å®Ÿè£… | 8æ™‚é–“ |
| Phase 3 | GitHub APIé€£æºæ©Ÿèƒ½ã®å®Ÿè£… | 4æ™‚é–“ |
| Phase 4 | GitHubã‚³ãƒŸãƒƒãƒˆè¡Œæ•°è¡¨ç¤ºãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å®Ÿè£… | 8æ™‚é–“ |
| Phase 5 | ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ãƒ†ã‚¹ãƒˆ | 4æ™‚é–“ |
| **åˆè¨ˆ** | | **30æ™‚é–“** |

---

## å®Ÿè£…ã®å„ªå…ˆé †ä½

### é«˜å„ªå…ˆåº¦ï¼ˆåŸºæœ¬æ©Ÿèƒ½ï¼‰

1. **Phase 1**: Widgetãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ©Ÿèƒ½ã®åŸºç›¤å®Ÿè£…
   - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«Widgetã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ã¯å¿…é ˆ
   - ä»–ã®æ©Ÿèƒ½ã®åŸºç›¤ã¨ãªã‚‹

2. **Phase 2**: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIæ‹¡å¼µãƒã‚¤ãƒ³ãƒˆã®å®Ÿè£…
   - ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹æ©Ÿèƒ½ã¯å¿…é ˆ
   - GitHubã‚³ãƒŸãƒƒãƒˆè¡Œæ•°è¡¨ç¤ºã®å‰æ

### ä¸­å„ªå…ˆåº¦ï¼ˆå®Ÿç”¨ä¾‹ï¼‰

3. **Phase 3**: GitHub APIé€£æºæ©Ÿèƒ½ã®å®Ÿè£…
   - å®Ÿç”¨çš„ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å®Ÿè£…ã«å¿…è¦

4. **Phase 4**: GitHubã‚³ãƒŸãƒƒãƒˆè¡Œæ•°è¡¨ç¤ºãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å®Ÿè£…
   - å®Ÿç”¨ä¾‹ã¨ã—ã¦é‡è¦

### ä½å„ªå…ˆåº¦ï¼ˆè£œå®Œï¼‰

5. **Phase 5**: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ãƒ†ã‚¹ãƒˆ
   - é–‹ç™ºè€…ä½“é¨“ã®å‘ä¸Šã«é‡è¦

---

## å®Œäº†æ¡ä»¶

- [ ] Widgetãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°æ©Ÿèƒ½ãŒå‹•ä½œã—ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«WidgetãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIæ‹¡å¼µãƒã‚¤ãƒ³ãƒˆãŒå‹•ä½œã—ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ãŒã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¡¨ç¤ºã•ã‚Œã‚‹
- [ ] GitHubã‚³ãƒŸãƒƒãƒˆè¡Œæ•°è¡¨ç¤ºãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒå‹•ä½œã—ã€ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã¨Widgetã«ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] ã™ã¹ã¦ã®ãƒ†ã‚¹ãƒˆãŒãƒ‘ã‚¹ã™ã‚‹
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå®Œå‚™ã•ã‚Œã¦ã„ã‚‹

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [å®Ÿè£…çŠ¶æ³ã¾ã¨ã‚](./implementation-status.md)
- [ãƒ—ãƒ©ã‚°ã‚¤ãƒ³é–‹ç™ºã‚¬ã‚¤ãƒ‰](../../guides/plugin-development.md)
- [Phase 4å®Ÿè£…è¨ˆç”»](./phase4-development-tools.md)
- [Issue #109 - Phase 4: Plugin Development Tools & Sample Plugins](https://github.com/otomatty/for-all-learners/issues/109)

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | å¤‰æ›´å†…å®¹ | æ‹…å½“ |
|------|----------|------|
| 2025-11-05 | Widgetãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° & ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼UIæ‹¡å¼µæ©Ÿèƒ½å®Ÿè£…è¨ˆç”»ä½œæˆ | AI Agent |

