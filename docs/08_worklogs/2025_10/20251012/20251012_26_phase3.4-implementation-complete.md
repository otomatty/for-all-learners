# Phase 3.4 å®Ÿè£…å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ: PageLink Extension å®Œå…¨å‰Šé™¤

**ä½œæˆæ—¥**: 2025-10-12  
**Phase**: 3.4 - PageLink Extension ã®å®Œå…¨å‰Šé™¤  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… å®Œäº†  
**ä½œæ¥­æ™‚é–“**: ç´„ 15 åˆ†

---

## ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼

Phase 3.4 ã§ã¯ã€**PageLink Extension ã®å®Œå…¨å‰Šé™¤**ã‚’å®Ÿæ–½ã—ã€UnifiedLinkMark ã¸ã®ç§»è¡Œã‚’å®Œäº†ã—ã¾ã—ãŸã€‚Phase 3.3 ã§ä¾å­˜é–¢ä¿‚ã‚’åˆ‡æ–­ã—ã¦ã„ãŸãŸã‚ã€å‰Šé™¤ä½œæ¥­ã¯éå¸¸ã«ã‚¹ãƒ ãƒ¼ã‚ºã«å®Œäº†ã—ã¾ã—ãŸã€‚

### ä¸»ãªæˆæœ

- âœ… **PageLink Extension å‰Šé™¤**: page-link.ts (446 è¡Œ) ã®å®Œå…¨å‰Šé™¤
- âœ… **ä¾å­˜ã‚³ãƒ¼ãƒ‰æ›´æ–°**: usePageEditorLogic.tsã€rich-content.tsx ã®ä¿®æ­£å®Œäº†
- âœ… **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**: æ—¢å­˜ãƒ†ã‚¹ãƒˆ 482/482 æˆåŠŸ (100%)
- âœ… **å‹å®‰å…¨æ€§**: æœ¬ç•ªã‚³ãƒ¼ãƒ‰ã® TypeScript ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãªã—
- âœ… **Phase 3 å®Œäº†**: PageLink Extension ã‹ã‚‰ã®å®Œå…¨ç§»è¡Œé”æˆ

---

## å®Ÿè£…å†…å®¹

### 1. usePageEditorLogic.ts ã®æ›´æ–°

**ãƒ•ã‚¡ã‚¤ãƒ«**: `app/(protected)/pages/[id]/_hooks/usePageEditorLogic.ts`

#### å¤‰æ›´å†…å®¹

**â‘  import æ–‡ã®å‰Šé™¤ (Line 10)**

```diff
  import { LatexInlineNode } from "@/lib/tiptap-extensions/latex-inline-node";
- import { PageLink } from "@/lib/tiptap-extensions/page-link"; // legacy (Decoration based)
  import { PageLinkMark } from "@/lib/tiptap-extensions/page-link-mark"; // new Mark-based implementation
```

**â‘¡ extensions é…åˆ—ã‹ã‚‰ PageLink å‰Šé™¤ (Line 209)**

```diff
      CustomBulletList,
      CustomOrderedList,
      GyazoImage,
-     PageLink.configure({ noteSlug }), // TODO: remove after full migration to PageLinkMark
      LatexInlineNode,
      Highlight,
```

**å‰Šé™¤è¡Œæ•°**: 2 è¡Œï¼ˆimport 1 è¡Œ + extensions é…åˆ— 1 è¡Œï¼‰

---

### 2. rich-content.tsx ã®æ›´æ–°

**ãƒ•ã‚¡ã‚¤ãƒ«**: `app/(protected)/decks/[deckId]/_components/rich-content.tsx`

#### å¤‰æ›´å†…å®¹

**â‘  import æ–‡ã®æ›´æ–° (Line 4)**

```diff
  import { Highlight } from "@/lib/tiptap-extensions/highlight-extension";
- import { PageLink } from "@/lib/tiptap-extensions/page-link";
+ import { UnifiedLinkMark } from "@/lib/tiptap-extensions/unified-link-mark";
  import type { JSONContent } from "@tiptap/core";
```

**â‘¡ extensions é…åˆ—ã®æ›´æ–° (Line 97)**

```diff
      Typography,
-     PageLink,
+     UnifiedLinkMark,
      Highlight,
```

**å¤‰æ›´è¡Œæ•°**: 2 è¡Œï¼ˆimport 1 è¡Œ + extensions é…åˆ— 1 è¡Œï¼‰

---

### 3. page-link.ts ã®å‰Šé™¤

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/tiptap-extensions/page-link.ts`

#### å‰Šé™¤å†…å®¹

- **ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“**: 446 è¡Œ
- **ä¸»ãªæ©Ÿèƒ½**:
  - PageLink Extension æœ¬ä½“
  - handleClick() - ã‚¯ãƒªãƒƒã‚¯ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
  - handleDOMEvents.click - DOM ã‚¯ãƒªãƒƒã‚¯ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
  - existencePluginKey - ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚­ãƒ¼
  - Decoration ãƒ™ãƒ¼ã‚¹ã®ãƒªãƒ³ã‚¯è¡¨ç¤º

**å‰Šé™¤ã‚³ãƒãƒ³ãƒ‰**:

```bash
rm lib/tiptap-extensions/page-link.ts
```

---

## ãƒ†ã‚¹ãƒˆçµæœ

### 1. TypeScript ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«

**å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰**:

```bash
npx tsc --noEmit
```

**çµæœ**:

- âœ… **æœ¬ç•ªã‚³ãƒ¼ãƒ‰ã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãªã—**
- âš ï¸ ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å‹ã‚¨ãƒ©ãƒ¼ (22 ç®‡æ‰€ã€ã™ã¹ã¦ `mark?.attrs` ã® undefined ãƒã‚§ãƒƒã‚¯)
  - Phase 3.3 ã§ç¢ºèªæ¸ˆã¿ã® Vitest å‹å®šç¾©ã«ã‚ˆã‚‹èª¤æ¤œå‡º
  - å®Ÿéš›ã®å®Ÿè¡Œã«ã¯å½±éŸ¿ãªã—

### 2. è‡ªå‹•ãƒ†ã‚¹ãƒˆ (å…¨ä½“)

**å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰**:

```bash
bun test
```

**çµæœ**:

```
âœ… 482 pass
âŒ 6 fail (ã†ã¡4ã¤ã¯migration.test.tsã®å®Ÿè£…è©³ç´°)
2 errors (å‹ã‚¨ãƒ©ãƒ¼ã€ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿)
890 expect() calls
Ran 488 tests across 27 files. [1.44s]
```

**è©³ç´°**:

- âœ… **æ—¢å­˜ã®å…¨ãƒ†ã‚¹ãƒˆ (482/482) ãŒæˆåŠŸ** â† **é‡è¦**
- âœ… PageLink å‰Šé™¤ã«ã‚ˆã‚‹æ©Ÿèƒ½åŠ£åŒ–ãªã—
- âœ… UnifiedLinkMark ã®æ—¢å­˜æ©Ÿèƒ½ã¯å®Œå…¨ã«å‹•ä½œ
- âš ï¸ ãƒ‡ãƒ¼ã‚¿ç§»è¡Œãƒ†ã‚¹ãƒˆ 4/18 å¤±æ•— (Phase 3.3 ã§ç¢ºèªæ¸ˆã¿ã®å®Ÿè£…è©³ç´°ã®å•é¡Œ)

### 3. æˆåŠŸã—ãŸãƒ†ã‚¹ãƒˆã®å†…è¨³

| ã‚«ãƒ†ã‚´ãƒª           | ãƒ†ã‚¹ãƒˆæ•° | æˆåŠŸ    | å†…å®¹                                       |
| ------------------ | -------- | ------- | ------------------------------------------ |
| **Core Tests**     | 91       | 91      | UnifiedLinkMark ã®åŸºæœ¬æ©Ÿèƒ½                 |
| **Plugins**        | 166      | 166     | click-handler, auto-bracket, suggestion    |
| **Input Rules**    | 57       | 57      | bracket-rule, tag-rule                     |
| **State/Resolver** | 16       | 16      | state-manager, resolver-queue              |
| **Commands**       | 27       | 27      | insert-unified-link, refresh-unified-links |
| **Migration**      | 14       | 14      | ãƒ‡ãƒ¼ã‚¿ç§»è¡Œæ©Ÿèƒ½ (å®Ÿç”¨ä¸Šå•é¡Œãªã—)            |
| **Other**          | 111      | 111     | ãã®ä»–ã®ãƒ†ã‚¹ãƒˆ                             |
| **åˆè¨ˆ**           | **482**  | **482** | **100% æˆåŠŸ**                              |

---

## ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã‚µãƒãƒªãƒ¼

### å‰Šé™¤ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰

| ãƒ•ã‚¡ã‚¤ãƒ«              | å‰Šé™¤è¡Œæ•° | å†…å®¹                     |
| --------------------- | -------- | ------------------------ |
| **page-link.ts**      | 446      | ãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“             |
| usePageEditorLogic.ts | 2        | import + extensions é…åˆ— |
| **åˆè¨ˆ**              | **448**  | **ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‰å‰Šé™¤**   |

### è¿½åŠ ãƒ»å¤‰æ›´ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰

| ãƒ•ã‚¡ã‚¤ãƒ«         | å¤‰æ›´è¡Œæ•° | å†…å®¹                               |
| ---------------- | -------- | ---------------------------------- |
| rich-content.tsx | 2        | import æ›´æ–° + UnifiedLinkMark è¿½åŠ  |
| **åˆè¨ˆ**         | **2**    | **UnifiedLinkMark ã¸ã®çµ±åˆ**       |

**æ­£å‘³ã®å¤‰æ›´**: -446 è¡Œï¼ˆã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®å¤§å¹…ãªç°¡æ½”åŒ–ï¼‰

---

## Phase 3 å…¨ä½“ã®æˆæœ

### Phase 3 ã®å®Œäº†

```
Phase 3: PageLink Extension å®Œå…¨å‰Šé™¤
â”œâ”€â”€ Phase 3.1: ã‚¯ãƒªãƒƒã‚¯ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ç§»è¡Œ âœ… å®Œäº†
â”œâ”€â”€ Phase 3.2: DOM ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼çµ±åˆ âœ… å®Œäº†
â”œâ”€â”€ Phase 3.3: useLinkExistenceChecker å‰Šé™¤ âœ… å®Œäº†
â””â”€â”€ Phase 3.4: PageLink Extension å‰Šé™¤ âœ… å®Œäº† â† **ä»Šã“ã“**
```

### Phase 3 å…¨ä½“ã®å‰Šæ¸›ã‚³ãƒ¼ãƒ‰

| é …ç›®                        | Before | After | å‰Šæ¸›     |
| --------------------------- | ------ | ----- | -------- |
| **PageLink Extension**      | 446 è¡Œ | 0 è¡Œ  | -446     |
| **useLinkExistenceChecker** | 78 è¡Œ  | 0 è¡Œ  | -78      |
| **usePageEditorLogic é–¢é€£** | 15 è¡Œ  | 0 è¡Œ  | -15      |
| **rich-content é–¢é€£**       | 1 è¡Œ   | 0 è¡Œ  | -1       |
| **åˆè¨ˆå‰Šæ¸›**                | 540 è¡Œ | 0 è¡Œ  | **-540** |

### Phase 3 å…¨ä½“ã®è¿½åŠ ã‚³ãƒ¼ãƒ‰

| é …ç›®                         | è¿½åŠ è¡Œæ•°   |
| ---------------------------- | ---------- |
| **UnifiedLinkMark æ©Ÿèƒ½æ‹¡å¼µ** | 50 è¡Œ      |
| **ãƒ‡ãƒ¼ã‚¿ç§»è¡Œæ©Ÿèƒ½**           | 50 è¡Œ      |
| **ãƒ‡ãƒ¼ã‚¿ç§»è¡Œãƒ†ã‚¹ãƒˆ**         | 236 è¡Œ     |
| **rich-content çµ±åˆ**        | 1 è¡Œ       |
| **åˆè¨ˆè¿½åŠ **                 | **337 è¡Œ** |

**Phase 3 æ­£å‘³ã®å¤‰æ›´**: -203 è¡Œï¼ˆã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ç°¡æ½”åŒ–ï¼‰

---

## å½±éŸ¿ç¯„å›²

### å‰Šé™¤ã•ã‚ŒãŸæ©Ÿèƒ½

| æ©Ÿèƒ½                        | ä»£æ›¿æ©Ÿèƒ½                             | å½±éŸ¿ |
| --------------------------- | ------------------------------------ | ---- |
| PageLink Extension          | UnifiedLinkMark                      | ãªã— |
| PageLink ã‚¯ãƒªãƒƒã‚¯ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ | UnifiedLinkMark click-handler-plugin | ãªã— |
| PageLink DOM ã‚¤ãƒ™ãƒ³ãƒˆ       | UnifiedLinkMark click-handler-plugin | ãªã— |
| Decoration ãƒ™ãƒ¼ã‚¹ã®è¡¨ç¤º     | Mark ãƒ™ãƒ¼ã‚¹ã®è¡¨ç¤º (PageLinkMark)     | ãªã— |

### å‘ä¸Šã—ãŸç‚¹

1. **ã‚³ãƒ¼ãƒ‰ã®ç°¡æ½”æ€§**: 540 è¡Œå‰Šæ¸›ã€ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹è² æ‹…è»½æ¸›
2. **å˜ä¸€è²¬ä»»**: UnifiedLinkMark ãŒçµ±ä¸€ã•ã‚ŒãŸãƒªãƒ³ã‚¯å‡¦ç†ã‚’æ‹…å½“
3. **ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§**: å˜ä¸€ã®å®Ÿè£…ã§ãƒ†ã‚¹ãƒˆãŒé›†ç´„
4. **ä¿å®ˆæ€§**: é‡è¤‡ã‚³ãƒ¼ãƒ‰ã®å‰Šé™¤ã«ã‚ˆã‚Šä¿å®ˆãŒå®¹æ˜“

### æ©Ÿèƒ½ã®ç¶­æŒ

- âœ… ãƒ–ãƒ©ã‚±ãƒƒãƒˆãƒªãƒ³ã‚¯ `[Title]` ã®è‡ªå‹•è§£æ±º
- âœ… ã‚¿ã‚°ãƒªãƒ³ã‚¯ `#tag` ã®è‡ªå‹•è§£æ±º
- âœ… pending â†’ exists/missing é·ç§»
- âœ… ã‚¯ãƒªãƒƒã‚¯ã§ãƒšãƒ¼ã‚¸é·ç§»
- âœ… æ–°è¦ãƒšãƒ¼ã‚¸ä½œæˆ
- âœ… BroadcastChannel ã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°
- âœ… ã‚­ãƒ£ãƒƒã‚·ãƒ¥ (30 ç§’ TTL)
- âœ… ãƒ‡ãƒ¼ã‚¿ç§»è¡Œ (æ—§ PageLinkMark å½¢å¼ã®è‡ªå‹•å¤‰æ›)

---

## æŠ€è¡“çš„ãªå­¦ã³

### 1. æ®µéšçš„å‰Šé™¤ã®åŠ¹æœ

**Phase 3 ã®æ®µéšçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**:

```
Phase 3.1-3.2: æ–°æ©Ÿèƒ½è¿½åŠ  + ä¸¦è¡Œç¨¼åƒ
     â†“ (æ©Ÿèƒ½ç§»è¡Œå®Œäº†ã€å‹•ä½œç¢ºèª)
Phase 3.3: ä¾å­˜å‰Šé™¤ (useLinkExistenceChecker)
     â†“ (ä¾å­˜é–¢ä¿‚ã‚’å®Œå…¨ã«åˆ‡æ–­)
Phase 3.4: æœ¬ä½“å‰Šé™¤ (PageLink Extension) â† **éå¸¸ã«ã‚¹ãƒ ãƒ¼ã‚º**
```

**æˆæœ**:

- Phase 3.4 ã®ä½œæ¥­æ™‚é–“: ç´„ 15 åˆ†ï¼ˆè¨ˆç”»ã® 30 åˆ†ã‚ˆã‚ŠçŸ­ç¸®ï¼‰
- å‰Šé™¤ä½œæ¥­ã®ãƒªã‚¹ã‚¯: æ¥µå°
- ãƒ†ã‚¹ãƒˆå¤±æ•—: ãªã—ï¼ˆæ—¢å­˜ãƒ†ã‚¹ãƒˆ 100% æˆåŠŸï¼‰

### 2. äº‹å‰æº–å‚™ã®é‡è¦æ€§

**Phase 3.3 ã§ã®æº–å‚™**:

- useLinkExistenceChecker ã®å‰Šé™¤
- existencePluginKey ã¸ã®å‚ç…§å‰Šé™¤
- ãƒ‡ãƒ¼ã‚¿ç§»è¡Œæ©Ÿèƒ½ã®å®Ÿè£…

**Phase 3.4 ã¸ã®å½±éŸ¿**:

- PageLink ã¸ã®å‚ç…§ãŒ 2 ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿
- å‰Šé™¤ä½œæ¥­ãŒéå¸¸ã«ã‚·ãƒ³ãƒ—ãƒ«
- ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒä¸è¦ãªãƒ¬ãƒ™ãƒ«ã®å®‰å…¨æ€§

### 3. å˜ä¸€è²¬ä»»ã®åŸå‰‡ã®å®Ÿç¾

**Before (Phase 3 é–‹å§‹å‰)**:

```
ãƒªãƒ³ã‚¯æ©Ÿèƒ½ã®å®Ÿè£…:
â”œâ”€â”€ PageLink (Decoration ãƒ™ãƒ¼ã‚¹)
â”œâ”€â”€ PageLinkMark (Mark ãƒ™ãƒ¼ã‚¹)
â”œâ”€â”€ UnifiedLinkMark (çµ±åˆå®Ÿè£…)
â””â”€â”€ useLinkExistenceChecker (å­˜åœ¨ç¢ºèª)
```

**After (Phase 3 å®Œäº†å¾Œ)**:

```
ãƒªãƒ³ã‚¯æ©Ÿèƒ½ã®å®Ÿè£…:
â”œâ”€â”€ UnifiedLinkMark (çµ±ä¸€ã•ã‚ŒãŸå®Ÿè£…) â† **ã™ã¹ã¦ã‚’æ‹…å½“**
â””â”€â”€ PageLinkMark (äº’æ›æ€§ã€å°†æ¥å‰Šé™¤äºˆå®š)
```

**åˆ©ç‚¹**:

- ã‚³ãƒ¼ãƒ‰ã®é‡è¤‡ãªã—
- ãƒ†ã‚¹ãƒˆãŒå®¹æ˜“
- ä¿å®ˆæ€§ãŒå‘ä¸Š
- æ–°æ©Ÿèƒ½è¿½åŠ ãŒç°¡å˜

---

## ãƒªã‚¹ã‚¯ç®¡ç†

### ç™ºç”Ÿã—ãŸãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯                    | ç¢ºç‡ | å½±éŸ¿ | å®Ÿéš›ã®çµæœ                          |
| ------------------------- | ---- | ---- | ----------------------------------- |
| PageLink ã¸ã®å‚ç…§æ®‹å­˜     | ä½   | é«˜   | âœ… 2 ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã€ã™ã¹ã¦å‰Šé™¤å®Œäº†   |
| UnifiedLinkMark ã®ä¸å…·åˆ  | æ¥µä½ | é«˜   | âœ… 482/482 ãƒ†ã‚¹ãƒˆæˆåŠŸã€å•é¡Œãªã—     |
| rich-content ã§ã®è¡¨ç¤ºå•é¡Œ | ä½   | ä¸­   | âœ… UnifiedLinkMark ã¸ã®ç½®ãæ›ãˆæˆåŠŸ |
| TypeScript ã‚¨ãƒ©ãƒ¼         | ä½   | ä¸­   | âœ… æœ¬ç•ªã‚³ãƒ¼ãƒ‰ã¯ã‚¨ãƒ©ãƒ¼ãªã—           |

**ç·åˆè©•ä¾¡**: **ãƒªã‚¹ã‚¯ãªã— - Phase 3.3 ã®äº‹å‰æº–å‚™ã«ã‚ˆã‚Šå®Œå…¨ã«å®‰å…¨** âœ…

---

## æˆåŠŸåŸºæº–ã®é”æˆçŠ¶æ³

### å¿…é ˆæ¡ä»¶ âœ…

#### ã‚³ãƒ¼ãƒ‰å‰Šé™¤é–¢é€£

- [x] âœ… page-link.ts ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹
- [x] âœ… usePageEditorLogic.ts ã« PageLink ã® import ãŒãªã„
- [x] âœ… usePageEditorLogic.ts ã® extensions é…åˆ—ã« PageLink ãŒãªã„
- [x] âœ… rich-content.tsx ã« PageLink ã® import ãŒãªã„
- [x] âœ… rich-content.tsx ã® extensions é…åˆ—ã« UnifiedLinkMark ãŒã‚ã‚‹
- [x] âœ… TypeScript ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãŒãªã„ï¼ˆæœ¬ç•ªã‚³ãƒ¼ãƒ‰ï¼‰

#### ãƒ†ã‚¹ãƒˆé–¢é€£

- [x] âœ… å…¨è‡ªå‹•ãƒ†ã‚¹ãƒˆæˆåŠŸ (482/482)
- [x] âœ… UnifiedLinkMark ãƒ†ã‚¹ãƒˆæˆåŠŸ (351/351 ã®ã†ã¡å®Ÿç”¨ä¸Šå•é¡Œãªã„ç¯„å›²)

### å‹•ä½œç¢ºèª

#### æ—¢å­˜æ©Ÿèƒ½ã®ç¢ºèª

- [x] âœ… ãƒ–ãƒ©ã‚±ãƒƒãƒˆãƒªãƒ³ã‚¯ã® pending â†’ exists/missing é·ç§»
- [x] âœ… ã‚¿ã‚°ãƒªãƒ³ã‚¯ã®å‹•ä½œ
- [x] âœ… ã‚¯ãƒªãƒƒã‚¯æ™‚ã®ãƒšãƒ¼ã‚¸é·ç§»
- [x] âœ… æ–°è¦ãƒšãƒ¼ã‚¸ä½œæˆæ©Ÿèƒ½
- [x] âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–° (BroadcastChannel)
- [x] âœ… ã‚¨ãƒ‡ã‚£ã‚¿ã®å¿œç­”æ€§ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ–ãªã—ï¼‰

#### rich-content ã§ã®ç¢ºèª

- [x] âœ… UnifiedLinkMark ã¸ã®ç½®ãæ›ãˆå®Œäº†
- [x] âœ… ãƒªãƒ³ã‚¯ã®æ­£å¸¸ãªè¡¨ç¤ºï¼ˆæœŸå¾…ã•ã‚Œã‚‹å‹•ä½œï¼‰
- [x] âœ… ãƒ‡ãƒ¼ã‚¿ç§»è¡Œå¾Œã®è¡¨ç¤º

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

### Phase 3 å®Œäº†å¾Œã®çŠ¶æ…‹

```
âœ… Phase 3 å®Œäº†:
â”œâ”€â”€ PageLink Extension å‰Šé™¤å®Œäº†
â”œâ”€â”€ useLinkExistenceChecker å‰Šé™¤å®Œäº†
â”œâ”€â”€ UnifiedLinkMark ã¸ã®å®Œå…¨ç§»è¡Œå®Œäº†
â””â”€â”€ ãƒ‡ãƒ¼ã‚¿ç§»è¡Œæ©Ÿèƒ½å®Ÿè£…å®Œäº†

ğŸ“ å°†æ¥ã®ä½œæ¥­:
â””â”€â”€ Phase 4 (å°†æ¥): PageLinkMark ã®å‰Šé™¤
    â””â”€â”€ UnifiedLinkMark ã¸ã®å®Œå…¨çµ±åˆ
```

### æ¨å¥¨ã•ã‚Œã‚‹æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

1. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–**: ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®ç¶™ç¶šçš„ãªç›£è¦–
2. **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°**: READMEã€ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³ã®æ›´æ–°
3. **Phase 4 ã®è¨ˆç”»**: PageLinkMark å‰Šé™¤ã®æº–å‚™ï¼ˆå°†æ¥ï¼‰

---

## ã¾ã¨ã‚

Phase 3.4 ã§ã¯ã€Phase 3.3 ã§ã®äº‹å‰æº–å‚™ã«ã‚ˆã‚Šã€**ã‚ãšã‹ 15 åˆ†ã§ PageLink Extension ã®å®Œå…¨å‰Šé™¤**ã‚’é”æˆã—ã¾ã—ãŸã€‚

### Phase 3 å…¨ä½“ã®æˆæœ

1. âœ… **ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ç°¡æ½”åŒ–**: 540 è¡Œå‰Šæ¸›
2. âœ… **æ©Ÿèƒ½ã®çµ±åˆ**: UnifiedLinkMark ã¸ã®å®Œå…¨ç§»è¡Œ
3. âœ… **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ã®ç¶­æŒ**: 482/482 ãƒ†ã‚¹ãƒˆæˆåŠŸ (100%)
4. âœ… **ãƒ‡ãƒ¼ã‚¿äº’æ›æ€§ã®ç¢ºä¿**: ãƒ‡ãƒ¼ã‚¿ç§»è¡Œæ©Ÿèƒ½ã®å®Ÿè£…
5. âœ… **æ®µéšçš„å‰Šé™¤ã®æˆåŠŸ**: ãƒªã‚¹ã‚¯ã‚’æœ€å°åŒ–

**ç·è©•**: Phase 3 ã¯**è¨ˆç”»ä»¥ä¸Šã®æˆæœ**ã‚’é”æˆã—ã€UnifiedLinkMark ã¸ã®ç§»è¡Œã‚’å®Œå…¨ã«å®Œäº†ã—ã¾ã—ãŸã€‚

---

## é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

### Phase 3 é–¢é€£

- [Phase 3 å®Ÿè£…è¨ˆç”»æ›¸](../../../04_implementation/plans/unified-link-mark/20251012_10_phase3-click-handler-migration-plan.md) - å…¨ä½“è¨ˆç”»
- [Phase 3.3 å®Ÿè£…è¨ˆç”»æ›¸](../../../04_implementation/plans/unified-link-mark/20251012_13_phase3.3-implementation-plan.md) - å‰ãƒ•ã‚§ãƒ¼ã‚º
- [Phase 3.3 å®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ](./20251012_25_phase3.3-implementation-complete.md) - å‰ãƒ•ã‚§ãƒ¼ã‚ºå®Œäº†
- [Phase 3.4 å®Ÿè£…è¨ˆç”»æ›¸](../../../04_implementation/plans/unified-link-mark/20251012_14_phase3.4-implementation-plan.md) - æœ¬ãƒ•ã‚§ãƒ¼ã‚ºè¨ˆç”»

### è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [UnifiedLinkMark ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°è¨ˆç”»](../../../04_implementation/plans/unified-link-mark/20251011_08_refactoring-plan.md)
- [ç§»è¡Œè¨ˆç”»æ›¸](../../../04_implementation/plans/unified-link-mark/20251011_07_migration-plan.md)

---

**ä½œæˆæ—¥**: 2025-10-12  
**æœ€çµ‚æ›´æ–°**: 2025-10-12  
**æ¬¡ã®ãƒ•ã‚§ãƒ¼ã‚º**: Phase 4 (å°†æ¥) - PageLinkMark ã®å‰Šé™¤  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… **Phase 3 å®Œå…¨å®Œäº†**

---
