# Issue: ã‚µã‚¸ã‚§ã‚¹ãƒˆ UI å•é¡Œã®è©³ç´°èª¿æŸ»

**å„ªå…ˆåº¦**: ğŸŸ¡ Medium  
**æ¨å®šé›£åº¦**: â­â­ ä¸­ï¼ˆ2-3æ™‚é–“ï¼‰  
**æ¨å¥¨æœŸé™**: 4-5æ—¥ä»¥å†…  
**ä½œæˆæ—¥**: 2025-10-19

---

## æ¦‚è¦

äº‹å‰ãƒ¬ãƒãƒ¼ãƒˆã§ã€Œã‚µã‚¸ã‚§ã‚¹ãƒˆ UI ãŒç©ºã‚¯ã‚¨ãƒªã§è¡¨ç¤ºã•ã‚Œãªã„ã‚±ãƒ¼ã‚¹ã€ãŒæŒ‡æ‘˜ã•ã‚Œã¦ã„ã¾ã™ãŒã€å…·ä½“çš„ãªæ ¹æ‹ ãŒä¸æ˜ç¢ºã§ã™ã€‚

å®Ÿè£…ã®è©³ç´°ã‚’èª¿æŸ»ã—ã€å®Ÿéš›ã«å•é¡ŒãŒå­˜åœ¨ã™ã‚‹ã‹ã€ã‚ã‚‹ã„ã¯ã“ã‚ŒãŒä»•æ§˜é€šã‚Šã‹ç¢ºèªã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

---

## æŒ‡æ‘˜ã•ã‚Œã¦ã„ãŸå•é¡Œ

### åŸãƒ¬ãƒãƒ¼ãƒˆã®è¨˜è¿°

> **Issue 9: ã‚µã‚¸ã‚§ã‚¹ãƒˆ UI ã®å•é¡Œ**
> 
> ã‚µã‚¸ã‚§ã‚¹ãƒˆ UI ãŒç©ºã‚¯ã‚¨ãƒªï¼ˆ`[` ã ã‘ã€`#` ã ã‘ï¼‰ã®çŠ¶æ…‹ã§è¡¨ç¤ºã•ã‚Œãªã„å¯èƒ½æ€§
>
> å€™è£œãŒãªã„å ´åˆã€UI ãŒè¡¨ç¤ºã•ã‚Œãªã„ã®ã‹ã€å€™è£œãŒ 0 ä»¶ã§è¡¨ç¤ºã•ã‚Œã‚‹ã®ã‹ä¸æ˜ç¢º

---

## èª¿æŸ»ãŒå¿…è¦ãªé …ç›®

### 1. ã‚µã‚¸ã‚§ã‚¹ãƒˆ UI ã®å®Ÿè£…å ´æ‰€

**å€™è£œãƒ•ã‚¡ã‚¤ãƒ«**:

```
lib/tiptap-extensions/unified-link-mark/
â”œâ”€â”€ plugins/
â”‚   â””â”€â”€ suggestion-plugin.ts       â† å®Ÿè£…å€™è£œ
â”œâ”€â”€ components/
â”‚   â””â”€â”€ SuggestionPopup.tsx        â† UI å®Ÿè£…å€™è£œ
â””â”€â”€ __tests__/
    â”œâ”€â”€ suggestion-plugin.test.ts
    â””â”€â”€ suggestion-popup.test.ts
```

**ç¢ºèªã™ã¹ã**:
- [ ] `suggestion-plugin.ts` ãŒå­˜åœ¨ã™ã‚‹ã‹
- [ ] ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤ºãƒ­ã‚¸ãƒƒã‚¯ã¯ã©ã“ã«å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] æœ€å°æ–‡å­—æ•°ãƒã‚§ãƒƒã‚¯ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹

---

### 2. ç©ºã‚¯ã‚¨ãƒªæ™‚ã®å‹•ä½œ

**ãƒ†ã‚¹ãƒˆã‚·ãƒŠãƒªã‚ª**:

| å…¥åŠ› | æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ | å®Ÿè£…ã®çŠ¶æ…‹ |
|------|--------------|----------|
| `[` ã ã‘ | ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤ºï¼Ÿ | ç¢ºèªä¸­ |
| `[a` | ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤º | âœ… ç¢ºèªæ¸ˆ |
| `#` ã ã‘ | ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤ºï¼Ÿ | ç¢ºèªä¸­ |
| `#a` | ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤º | âœ… ç¢ºèªæ¸ˆ |

**ç¢ºèªå†…å®¹**:
```typescript
// ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤ºã®æ¡ä»¶
if (props.query.length < 1) {
  // â† ç©ºã‚¯ã‚¨ãƒªã‚’ä¸æ­£ã¨ã—ã¦æ‰±ã†ã®ã‹ï¼Ÿ
  // ãã‚Œã¨ã‚‚ç©ºã‚¯ã‚¨ãƒªã§ã‚‚å€™è£œã‚’è¡¨ç¤ºã™ã¹ãã‹ï¼Ÿ
  return [];
}
```

---

### 3. ã‚µã‚¸ã‚§ã‚¹ãƒˆãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å®Ÿè£…ã®ç¢ºèª

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/unilink/resolver/index.ts`

**ç¢ºèªé …ç›®**:

```typescript
export function searchAndResolvePages(
  query: string,  // â† ç©ºæ–‡å­—åˆ—ã®å ´åˆã©ã†ãªã‚‹ï¼Ÿ
  options?: SearchOptions
): Promise<PageInfo[]> {
  // 1. ã‚¯ã‚¨ãƒªãŒç©ºã®å ´åˆã®å‡¦ç†
  if (!query.trim()) {
    // A. å…¨ãƒšãƒ¼ã‚¸å€™è£œã‚’è¿”ã™ï¼Ÿ
    // B. ç©ºé…åˆ—ã‚’è¿”ã™ï¼Ÿ
    // C. ã‚¨ãƒ©ãƒ¼ã‚’æŠ•ã’ã‚‹ï¼Ÿ
    return [];
  }
```

**å®Ÿè£…ã®æ¤œè¨¼**:
- [ ] `searchPages()` ã«ç©ºã‚¯ã‚¨ãƒªãŒæ¸¡ã•ã‚ŒãŸå ´åˆã®å‡¦ç†
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¤œç´¢ã«æœ€å°æ–‡å­—æ•°åˆ¶é™ãŒã‚ã‚‹ã‹
- [ ] ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã•ã‚Œã¦ã„ã‚‹ã‹

---

## å®Ÿè£…ã‚³ãƒ¼ãƒ‰èª¿æŸ»ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ã‚¹ãƒ†ãƒƒãƒ— 1: ã‚µã‚¸ã‚§ã‚¹ãƒˆ UI å®Ÿè£…ã®ç¢ºèª

```bash
# ã‚µã‚¸ã‚§ã‚¹ãƒˆé–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œç´¢
find lib/tiptap-extensions/unified-link-mark -name "*suggestion*" -type f

# å‡ºåŠ›çµæœã‚’ç¢ºèª:
# - suggestion-plugin.ts ãŒå­˜åœ¨ã™ã‚‹ã‹
# - SuggestionPopup.tsx ãŒå­˜åœ¨ã™ã‚‹ã‹
# - __tests__/suggestion-plugin.test.ts ãŒå­˜åœ¨ã™ã‚‹ã‹
```

**ç¢ºèªçµæœ**:
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ï¼š
  - ___

---

### ã‚¹ãƒ†ãƒƒãƒ— 2: ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤ºæ¡ä»¶ã®ç¢ºèª

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/tiptap-extensions/unified-link-mark/plugins/suggestion-plugin.ts` ï¼ˆæ¨å®šï¼‰

```typescript
// ä»¥ä¸‹ã‚’ç¢ºèª
1. ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤ºã®æœ€å°æ–‡å­—æ•°
   - const minChars = 1;  // â† ã“ã®å€¤ã‚’ç¢ºèª

2. ç©ºã‚¯ã‚¨ãƒªæ™‚ã®å‡¦ç†
   if (props.query.length < minChars) {
     // UI ã‚’è¡¨ç¤ºã™ã‚‹ã‹ã€ã—ãªã„ã‹
   }

3. å€™è£œãŒãªã„å ´åˆã®å‡¦ç†
   if (items.length === 0) {
     // UI ã‚’è¡¨ç¤ºã™ã‚‹ã‹ã€ã—ãªã„ã‹
   }
```

**è¡Œç•ªå·ã‚’è¨˜éŒ²**:
- æœ€å°æ–‡å­—æ•°ãƒã‚§ãƒƒã‚¯: Line ___
- ç©ºã‚¯ã‚¨ãƒªæ™‚ã®å‡¦ç†: Line ___
- å€™è£œãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°: Line ___

---

### ã‚¹ãƒ†ãƒƒãƒ— 3: ã‚µã‚¸ã‚§ã‚¹ãƒˆ UI ã®å®Ÿè£…ç¢ºèª

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/tiptap-extensions/unified-link-mark/components/SuggestionPopup.tsx` ï¼ˆæ¨å®šï¼‰

```typescript
export function SuggestionPopup(props: {
  items: PageInfo[];
  command: (item: PageInfo) => void;
  editor: Editor;
}) {
  // 1. items ãŒç©ºã®å ´åˆã€UI ã‚’è¿”ã™ã‹ï¼Ÿ
  if (props.items.length === 0) {
    return null;  // â† ã¾ãŸã¯ä½•ã‹è¡¨ç¤ºï¼Ÿ
  }

  // 2. å€™è£œè¡¨ç¤ºã®å®Ÿè£…
  return (
    <div className="suggestion-popup">
      {props.items.map(item => (
        <SuggestionItem key={item.id} item={item} />
      ))}
    </div>
  );
}
```

**ç¢ºèªé …ç›®**:
- [ ] å€™è£œãŒ 0 ä»¶ã®å ´åˆã€UI ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹ï¼Ÿ
- [ ] UI ãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´åˆã€ã€Œå€™è£œãªã—ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã‚ã‚‹ã‹ï¼Ÿ

---

### ã‚¹ãƒ†ãƒƒãƒ— 4: ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã®ç¢ºèª

**ãƒ•ã‚¡ã‚¤ãƒ«**: `lib/tiptap-extensions/unified-link-mark/__tests__/suggestion-plugin.test.ts`

```typescript
describe("SuggestionPlugin", () => {
  // ä»¥ä¸‹ã®ãƒ†ã‚¹ãƒˆãŒå­˜åœ¨ã™ã‚‹ã‹ç¢ºèª
  
  it("should show suggestions for non-empty query", () => {
    // âœ… ã“ã‚Œã¯å­˜åœ¨ã™ã‚‹å¯èƒ½æ€§é«˜ã„
  });

  it("should NOT show suggestions for empty query", () => {
    // âš ï¸ ã“ã®è¡Œå‹•ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
  });

  it("should handle zero results gracefully", () => {
    // âš ï¸ å€™è£œãªã—æ™‚ã®å‹•ä½œãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
  });

  it("should show all pages for empty query", () => {
    // âš ï¸ ã¾ãŸã¯å…¨ãƒšãƒ¼ã‚¸å€™è£œã‚’è¡¨ç¤ºã™ã¹ãã‹ç¢ºèª
  });
});
```

**ãƒ†ã‚¹ãƒˆçµæœ**:
```bash
bun test lib/tiptap-extensions/unified-link-mark/__tests__/suggestion-plugin.test.ts
```

---

## ãƒ–ãƒ©ã‚¦ã‚¶ã§ã®æ¤œè¨¼æ‰‹é †

### ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
cd /Users/sugaiakimasa/apps/for-all-learners
bun run dev
# http://localhost:3000 ã§ã‚¢ãƒ—ãƒªèµ·å‹•
```

---

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ 1: ç©ºã‚¯ã‚¨ãƒªã§ã®ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤º

1. ãƒ¡ãƒ¢ã‚’ä½œæˆ
2. ã‚¨ãƒ‡ã‚£ã‚¿ã§ `[` ã¨å…¥åŠ›ï¼ˆãã‚Œä»¥ä¸Šå…¥åŠ›ã—ãªã„ï¼‰
3. **è¦³å¯Ÿ**: ã‚µã‚¸ã‚§ã‚¹ãƒˆ UI ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼Ÿ

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
- A. ã‚µã‚¸ã‚§ã‚¹ãƒˆ UI ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆå€™è£œãªã—ï¼‰
- B. ã‚µã‚¸ã‚§ã‚¹ãƒˆ UI ãŒè¡¨ç¤ºã•ã‚Œãªã„
- C. å…¨ãƒšãƒ¼ã‚¸å€™è£œãŒè¡¨ç¤ºã•ã‚Œã‚‹

**å®Ÿè£…ã¨ã®ç…§åˆ**:
- **A ã®å ´åˆ**: ä»•æ§˜é€šã‚Šã€UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå€™è£œãªã—ã‚’è¡¨ç¤º
- **B ã®å ´åˆ**: `if (query.length < 1) return []` ã§å‡¦ç†
- **C ã®å ´åˆ**: UX æ”¹å–„ã¨ã—ã¦å…¨ãƒšãƒ¼ã‚¸å€™è£œã‚’è¡¨ç¤º

---

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ 2: 1æ–‡å­—ä»¥ä¸Šã§ã®ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤º

1. åŒæ§˜ã«æ–°è¦ãƒ¡ãƒ¢
2. ã‚¨ãƒ‡ã‚£ã‚¿ã§ `[a` ã¨å…¥åŠ›
3. **è¦³å¯Ÿ**: ã‚µã‚¸ã‚§ã‚¹ãƒˆ UI ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼Ÿ
4. **å…¥åŠ›ç¶šã‘ã‚‹**: `[abc` â†’ ã‚µã‚¸ã‚§ã‚¹ãƒˆæ›´æ–°ã•ã‚Œã‚‹ï¼Ÿ

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
- âœ… ã‚µã‚¸ã‚§ã‚¹ãƒˆ UI ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- âœ… ã‚¯ã‚¨ãƒªå¤‰æ›´ã§å€™è£œãŒæ›´æ–°ã•ã‚Œã‚‹

---

### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ 3: ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°ã§ã®ç©ºã‚¯ã‚¨ãƒª

1. ãƒ¡ãƒ¢ã‚’ä½œæˆ
2. ã‚¨ãƒ‡ã‚£ã‚¿ã§ `#` ã¨å…¥åŠ›ï¼ˆãã‚Œä»¥ä¸Šå…¥åŠ›ã—ãªã„ï¼‰
3. **è¦³å¯Ÿ**: ã‚µã‚¸ã‚§ã‚¹ãƒˆ UI ãŒè¡¨ç¤ºã•ã‚Œã‚‹ï¼Ÿ

**æœŸå¾…ã•ã‚Œã‚‹çµæœ**:
- åŒã˜ãã€`[` ã®æ™‚ã¨åŒã˜å‹•ä½œ

---

## åˆ¤å®šãƒ•ãƒ­ãƒ¼

```
â”Œâ”€ ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤ºæ¡ä»¶ã®å®Ÿè£…ã‚’ç¢ºèª
â”‚
â”œâ”€ if (query.length < 1) å‡¦ç†ã‚ã‚Šï¼Ÿ
â”‚  â”œâ”€ YES â†’ ç©ºã‚¯ã‚¨ãƒªã§ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤ºã€Œã•ã‚Œãªã„ã€ï¼ˆä»•æ§˜é€šã‚Šï¼‰
â”‚  â”‚        â†’ Issue: ä¸è¦ï¼ˆè¨­è¨ˆé€šã‚Šï¼‰
â”‚  â”‚
â”‚  â””â”€ NO â†’ ç©ºã‚¯ã‚¨ãƒªã§ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤ºã€Œã•ã‚Œã‚‹ã€ï¼Ÿ
â”‚      â”œâ”€ YES â†’ UI è¡¨ç¤ºå‹•ä½œã‚’ç¢ºèª
â”‚      â”‚       â”œâ”€ å€™è£œãªã— UI ãŒè¡¨ç¤ºã•ã‚Œã‚‹ â†’ Issue: ä¸è¦ï¼ˆUX OKï¼‰
â”‚      â”‚       â””â”€ å…¨ãƒšãƒ¼ã‚¸å€™è£œãŒè¡¨ç¤ºã•ã‚Œã‚‹ â†’ Issue: è»½å¾®ï¼ˆå€™è£œå¤šã„ï¼‰
â”‚      â”‚
â”‚      â””â”€ NO â†’ ç•°å¸¸ç™ºç”Ÿ
â”‚             â†’ Issue: Criticalï¼ˆã‚µã‚¸ã‚§ã‚¹ãƒˆæ©Ÿèƒ½ã®ä¸å…·åˆï¼‰
```

---

## å®Ÿè£…ã®ä¿®æ­£ææ¡ˆï¼ˆå•é¡ŒãŒã‚ã‚‹å ´åˆï¼‰

### ã‚·ãƒŠãƒªã‚ª A: ç©ºã‚¯ã‚¨ãƒªã§ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤ºã•ã‚Œã‚‹ã¹ã

```typescript
// suggestion-plugin.ts ã®ä¿®æ­£å€™è£œ

export function createSuggestionPlugin(options: SuggestionOptions) {
  return Suggestion({
    plugin: (props) => {
      // ç¾åœ¨: if (props.query.length < 1) return []
      // ä¿®æ­£: ç©ºã‚¯ã‚¨ãƒªã§ã‚‚å€™è£œã‚’è¿”ã™
      
      const query = props.query.trim();
      
      // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ 1: ç©ºã‚¯ã‚¨ãƒªã§å…¨ãƒšãƒ¼ã‚¸å€™è£œ
      if (query === "") {
        return getAllPages();  // â† å…¨å€™è£œ
      }
      
      // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ 2: ç©ºã‚¯ã‚¨ãƒªã§ç©ºé…åˆ—ï¼ˆç¾åœ¨ã®å®Ÿè£…ï¼‰
      if (query === "") {
        return [];
      }
    },
  });
}
```

---

### ã‚·ãƒŠãƒªã‚ª B: å€™è£œãªã—æ™‚ã«ã€Œè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º

```typescript
// SuggestionPopup.tsx ã®ä¿®æ­£å€™è£œ

export function SuggestionPopup(props: {
  items: PageInfo[];
  command: (item: PageInfo) => void;
}) {
  return (
    <div className="suggestion-popup">
      {props.items.length > 0 ? (
        props.items.map(item => (
          <SuggestionItem key={item.id} item={item} onClick={() => props.command(item)} />
        ))
      ) : (
        <div className="no-suggestions">
          <p>è©²å½“ã™ã‚‹ãƒšãƒ¼ã‚¸ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</p>
        </div>
      )}
    </div>
  );
}
```

---

## æ–‡æ›¸æ›´æ–°å†…å®¹

### æ›´æ–°å¯¾è±¡

1. **`docs/02_requirements/features/unified-link-mark-spec.md`**
   - ã‚µã‚¸ã‚§ã‚¹ãƒˆ UI ã®å‹•ä½œä»•æ§˜ã‚’æ˜è¨˜

2. **`docs/04_implementation/plans/unified-link-mark/`**
   - ã‚µã‚¸ã‚§ã‚¹ãƒˆ UI ã®å®Ÿè£…çŠ¶æ³ã‚’è¨˜è¼‰

3. **`docs/03_design/features/suggestion-ui-design.md`** ï¼ˆå¿…è¦ã«å¿œã˜ã¦æ–°è¦ä½œæˆï¼‰
   - ç©ºã‚¯ã‚¨ãƒªæ™‚ã® UX ã‚’å®šç¾©

---

## ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª

- [ ] ã‚µã‚¸ã‚§ã‚¹ãƒˆé–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´æ‰€ã‚’ç¢ºèª
- [ ] å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ¼ãƒ‰ç¢ºèª
- [ ] ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ç¢ºèª

### å‹•ä½œç¢ºèª

- [ ] ç©ºã‚¯ã‚¨ãƒª `[` ã ã‘ â†’ ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤ºã®æœ‰ç„¡
- [ ] ç©ºã‚¯ã‚¨ãƒª `#` ã ã‘ â†’ ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤ºã®æœ‰ç„¡
- [ ] 1æ–‡å­—ä»¥ä¸Š `[a` â†’ ã‚µã‚¸ã‚§ã‚¹ãƒˆè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] 0 å€™è£œæ™‚ã® UI â†’ è¡¨ç¤ºå†…å®¹ç¢ºèª

### ä»•æ§˜ç¢ºèª

- [ ] è¨­è¨ˆæ›¸ã§ã‚µã‚¸ã‚§ã‚¹ãƒˆ UI ã®ä»•æ§˜ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] æœ€å°æ–‡å­—æ•°è¦ä»¶ãŒæ˜è¨˜ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] å€™è£œãªã—æ™‚ã® UI ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹

### ãƒ†ã‚¹ãƒˆç¢ºèª

- [ ] å˜ä½“ãƒ†ã‚¹ãƒˆã§ç©ºã‚¯ã‚¨ãƒªãŒ ãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ãƒ–ãƒ©ã‚¦ã‚¶ãƒ†ã‚¹ãƒˆã§å®Ÿéš›ã«å‹•ä½œç¢ºèª

---

## å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- ğŸ“‹ [æ¤œè¨¼å ±å‘Šæ›¸](20251019_05_verification-report-memo-link-investigation.md)
- ğŸ“ [å…ƒã®ãƒ¬ãƒãƒ¼ãƒˆ](20251018_04_memo-link-feature-investigation.md)
- ğŸ”— [UnifiedLinkMark ä»•æ§˜æ›¸](../../02_requirements/features/unified-link-mark-spec.md)
- ğŸ“Œ [ã‚¿ã‚°æ©Ÿèƒ½æ¤œè¨¼](20251019_04_tag-feature-verification.md)

---

## è£œè¶³: èª¿æŸ»ã‚³ãƒãƒ³ãƒ‰

### ã‚µã‚¸ã‚§ã‚¹ãƒˆé–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œç´¢

```bash
# ã‚µã‚¸ã‚§ã‚¹ãƒˆé–¢é€£ã™ã¹ã¦ã‚’æ¤œç´¢
grep -r "suggestion" lib/tiptap-extensions/unified-link-mark --include="*.ts" --include="*.tsx" | head -20

# ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã‚’å–å¾—
find lib/tiptap-extensions/unified-link-mark -name "*suggestion*"

# ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢
find lib -name "*.test.ts" | xargs grep -l "suggestion"
```

### ç©ºã‚¯ã‚¨ãƒªå‡¦ç†ã®æ¤œç´¢

```bash
# æœ€å°æ–‡å­—æ•°ãƒã‚§ãƒƒã‚¯ã‚’æ¤œç´¢
grep -r "query.length" lib/tiptap-extensions/unified-link-mark

# ç©ºæ–‡å­—åˆ—ãƒã‚§ãƒƒã‚¯ã‚’æ¤œç´¢
grep -r "query.*==.*\"\"" lib/tiptap-extensions/unified-link-mark
grep -r "query.*\.trim()" lib/tiptap-extensions/unified-link-mark
```

### ã‚µã‚¸ã‚§ã‚¹ãƒˆ UI è¡¨ç¤ºæ¡ä»¶ã®æ¤œç´¢

```bash
# items ãŒç©ºã®å ´åˆã®å‡¦ç†
grep -r "items.length.*===.*0" lib/tiptap-extensions/unified-link-mark

# UI éè¡¨ç¤ºæ¡ä»¶
grep -r "return null" lib/tiptap-extensions/unified-link-mark | grep -i suggestion
```

---

**ä½œæˆè€…**: GitHub Copilot  
**ä½œæˆæ—¥**: 2025-10-19  
**æœ€çµ‚æ›´æ–°**: 2025-10-19
