# 認証・セキュリティ仕様書

F.A.L学習プラットフォームの認証・認可・データ保護に関する包括的仕様書です。

## 📋 文書概要

本仕様書は、システムのセキュリティ要件と実装状況を体系的にまとめた文書です。セキュリティ監査、新機能開発、コンプライアンス対応、インシデント対応に活用できます。

## 📄 ファイル構成

- **`spec.md`** - 完全版仕様書（認証・セキュリティの全詳細）
- **`README.md`** - 本ファイル（使用方法ガイド）

## 🎯 使用目的

### セキュリティ監査
- 認証フロー・権限管理の全体把握
- RLSポリシー・データ保護の実装確認
- コンプライアンス要件への準拠状況確認

### 開発・設計支援  
- 新機能開発時の権限設計ガイドライン
- セキュリティベストプラクティスの参照
- 既存パターンの再利用と一貫性確保

### 運用・インシデント対応
- セキュリティインシデント時の影響範囲特定
- 権限管理・アクセス制御の運用手順
- 監査ログ・証跡管理の運用指針

## 🔑 主要カバー領域

### 認証アーキテクチャ
- Supabase Auth（OAuth、マジックリンク）
- ミドルウェアベース保護
- SSR対応セッション管理

### データアクセス制御
- Row Level Security（RLS）ポリシー
- 所有者・管理者・共有の権限パターン
- 細粒度アクセス制御

### 権限管理
- 管理者権限階層（admin/superadmin）
- 共有権限レベル（owner/editor/viewer）
- プラン別機能制限

### データ保護
- 暗号化保存（APIキー等）
- 論理削除・完全削除ポリシー
- プライバシー保護・GDPR対応

### 監視・監査
- 操作ログ記録
- 異常検知
- コンプライアンス監査支援

## ⚠️ 重要な注意事項

- 本文書は機密情報を含むため、**社内限定**での使用とする
- セキュリティポリシーの変更時は、本仕様書を速やかに更新する
- 外部パートナーとの共有時は、機密情報を除いたサマリ版を別途作成する

## 🔗 関連資料

- **実装済み機能サマリ**: `../001-implemented-tech-features-summary/`
- **開発者向け技術詳細**: プロジェクトルートの `CLAUDE.md`
- **データベース設計**: `database/schema.sql`、`database/admin.sql`
- **認証アーキテクチャ**: `.serena/memories/authentication_architecture.md`

## 📅 更新・メンテナンス

- **更新頻度**: セキュリティ要件変更時・四半期レビュー
- **更新責任**: セキュリティリード・システムアーキテクト
- **レビュー**: セキュリティ監査・コンプライアンス担当による承認
